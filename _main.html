<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Colin Gillespie and Robin Lovelace" />

<meta name="date" content="2016-01-11" />

  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<title>Efficient R programming</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="style.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<!--token:title:start-->
<div id="header">
<h1 class="title">Efficient R programming</h1>
<h4 class="author"><em>Colin Gillespie and Robin Lovelace</em></h4>
<h4 class="date"><em>2016-01-11</em></h4>
</div>
<!--token:title:end-->

<!--token:toc:start-->
<div id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li><a href="#efficient-set-up"><span class="toc-section-number">2</span> Efficient set-up</a><ul>
<li><a href="#r-startup"><span class="toc-section-number">2.1</span> R startup</a><ul>
<li><a href="#rprofile"><span class="toc-section-number">2.1.1</span> The <code>.Rprofile</code> file</a></li>
<li><a href="#example-.rprofile-settings"><span class="toc-section-number">2.1.2</span> Example <code>.Rprofile</code> settings</a></li>
<li><a href="#renviron"><span class="toc-section-number">2.1.3</span> The <code>.Renviron</code> file</a></li>
<li><a href="#exercises"><span class="toc-section-number">2.1.4</span> Exercises</a></li>
</ul></li>
<li><a href="#blas-and-alternative-r-interpreters"><span class="toc-section-number">2.2</span> BLAS and alternative R interpreters</a><ul>
<li><a href="#revolution-r"><span class="toc-section-number">2.2.1</span> Revolution R</a></li>
<li><a href="#other-interpreters"><span class="toc-section-number">2.2.2</span> Other interpreters</a></li>
<li><a href="#useful-blasbenchmarking-resources"><span class="toc-section-number">2.2.3</span> Useful BLAS/benchmarking resources</a></li>
<li><a href="#exercises-1"><span class="toc-section-number">2.2.4</span> Exercises</a></li>
</ul></li>
</ul></li>
<li><a href="#efficient-hardware"><span class="toc-section-number">3</span> Efficient hardware</a><ul>
<li><a href="#introduction-what-is-a-byte"><span class="toc-section-number">3.1</span> Introduction: what is a byte?</a></li>
<li><a href="#random-access-memory-ram"><span class="toc-section-number">3.2</span> Random access memory: RAM</a><ul>
<li><a href="#exercises-2"><span class="toc-section-number">3.2.1</span> Exercises</a></li>
</ul></li>
<li><a href="#hard-drives-hdd-vs-ssd"><span class="toc-section-number">3.3</span> Hard drives: HDD vs SSD</a></li>
<li><a href="#operating-systems-32-bit-or-64-bit"><span class="toc-section-number">3.4</span> Operating systems: 32-bit or 64-bit</a><ul>
<li><a href="#exercises-3"><span class="toc-section-number">3.4.1</span> Exercises</a></li>
</ul></li>
<li><a href="#central-processing-unit-cpu"><span class="toc-section-number">3.5</span> Central processing unit (CPU)</a></li>
<li><a href="#cloud-computing"><span class="toc-section-number">3.6</span> Cloud computing</a><ul>
<li><a href="#amazon-ec2"><span class="toc-section-number">3.6.1</span> Amazon EC2</a></li>
<li><a href="#exercise"><span class="toc-section-number">3.6.2</span> Exercise</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<!--token:toc:end-->

<!--token:body:start-->
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<p><strong>Dependencies for this book</strong></p>
<p>This book has been written in <strong>Markdown</strong> and was built with the bookdown package.</p>
<p>This book has been written in <strong>Markdown</strong> and was built with the bookdown package. The html version is also <a href="https://csgillespie.github.io/efficientR/">available</a>. Pull requests are welcome.</p>
<p>To build this book, the following packages must be installed.</p>
<pre class="sourceCode r"><code class="sourceCode r">pkgs =<span class="st"> </span><span class="kw">c</span>(
  <span class="st">&quot;numbers&quot;</span>, <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;readxl&quot;</span>,
  <span class="st">&quot;readr&quot;</span>, <span class="st">&quot;grid&quot;</span>, <span class="st">&quot;png&quot;</span>,
  <span class="st">&quot;rbenchmark&quot;</span>, <span class="st">&quot;microbenchmark&quot;</span>,
  <span class="st">&quot;fortunes&quot;</span>, <span class="st">&quot;pryr&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>)

to_install =<span class="st"> </span>pkgs[!pkgs %in%<span class="st"> </span><span class="kw">installed.packages</span>()]
if(<span class="kw">length</span>(to_install))
  <span class="kw">install.packages</span>(to_install)</code></pre>
<p>GitHub packages to install.</p>
<pre class="sourceCode r"><code class="sourceCode r">gh_pkgs =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;csgillespie/efficient_pkg&quot;</span>, <span class="st">&quot;rstudio/bookdown&quot;</span>)
devtools::<span class="kw">install_github</span>(gh_pkgs)</code></pre>
<!--chapter:end:index-->
<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>Introduction</p>
<!--chapter:end:01-introduction-->
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
</div>
<div id="efficient-set-up" class="section level1">
<h1><span class="header-section-number">2</span> Efficient set-up</h1>
<div id="r-startup" class="section level2">
<h2><span class="header-section-number">2.1</span> R startup</h2>
<p>Every time R starts, a number of files are read, in a particular order. The contents of these files determine how R performs for the duration of the session. Note that these files should only be changed with caution, as they may make your R version behave differently to other R installations. This could reduce the reproducibility of your code.</p>
<p>Files in three folders are important in this process:</p>
<ul>
<li><p><code>R_HOME</code>, the directory in which R is installed. The <code>etc</code> sub-directory can contain startup files read early on in the startup process. Find out where your <code>R_HOME</code> is with the <code>R.home()</code> command.</p></li>
<li><p><code>HOME</code>, the user’s home directory. Typically this is <code>/home/username</code> on Unix machines or <code>C:\Users\username</code> on Windows (since Windows 7). Ask R where your home directory with, <code>path.expand(&quot;~&quot;)</code> (note the use of the Unix-like tilde to represent the home directory).</p></li>
<li><p>R’s current working directory. This is reported by <code>getwd()</code>.</p></li>
</ul>
<p>It is important to know the location of the <code>.Rprofile</code> and <code>.Renviron</code> setup files that are being used out of these three options. R only uses one <code>.Rprofile</code> and one <code>.Renviron</code> in any session: if you have a <code>.Rprofile</code> file in your current project, R will ignore <code>.Rprofile</code> in <code>R_HOME</code> and <code>HOME</code>. Likewise, <code>.Rprofile</code> in <code>HOME</code> overrides <code>.Rprofile</code> in <code>R_HOME</code>. The same applies to <code>.Renviron</code>: you should remember that adding project specific environment variables with <code>.Renviron</code> will de-activate other <code>.Renviron</code> files.</p>
<p>To create a project specific setup R code you simply create a <code>.Rprofile</code> file in the project’s root directory and start adding R code, e.g. via <code>file.edit(&quot;.Rprofile&quot;)</code>. Remember that this will make <code>.Rprofile</code> in the home directory be ignored. To change the user-level settings from within an R editor such as RStudio, this would be:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">file.edit</span>(<span class="kw">file.path</span>(<span class="st">&quot;~&quot;</span>, <span class="st">&quot;.Rprofile&quot;</span>))</code></pre>
<p>Note that editing the <code>.Renviron</code> file in the same locations will have the same effect. The following code will create a user specific <code>.Renviron</code> file (where API keys and other cross-project environment variables can be stored), without overwriting any existing file.</p>
<pre class="sourceCode r"><code class="sourceCode r">user_renviron =<span class="st"> </span><span class="kw">path.expand</span>(<span class="kw">file.path</span>(<span class="st">&quot;~&quot;</span>, <span class="st">&quot;.Renviron&quot;</span>))
if(!<span class="kw">file.exists</span>(user_renviron)) <span class="co"># check to see if the file already exists</span>
  <span class="kw">file.create</span>(user_renviron)
<span class="kw">file.edit</span>(user_renviron) <span class="co"># open with another text editor if this fails</span></code></pre>
<p>The location, contents and uses of each is outlined in more detail below.</p>
<div id="rprofile" class="section level3">
<h3><span class="header-section-number">2.1.1</span> The <code>.Rprofile</code> file</h3>
<p>By default R looks for and runs <code>.Rprofile</code> files in the three locations described above, in a specific order. <code>.Rprofile</code> files are simply R scripts that run each time R runs and they can be found within <code>R_HOME</code>, <code>HOME</code> and the project’s home directory, found with <code>getwd()</code>. To check if you have a site-wide <code>.Rprofile</code>, which will run for all users on start-up, run:</p>
<pre class="sourceCode r"><code class="sourceCode r">site_path =<span class="st"> </span><span class="kw">R.home</span>(<span class="dt">component =</span> <span class="st">&quot;home&quot;</span>)
fname =<span class="st"> </span><span class="kw">file.path</span>(site_path, <span class="st">&quot;etc&quot;</span>, <span class="st">&quot;Rprofile.site&quot;</span>)
<span class="kw">file.exists</span>(fname)</code></pre>
<p>The above code checks for the presence of <code>Rprofile.site</code> in that directory. As outlined above, the <code>.Rprofile</code> located in your home directory is user-specific. Again, we can test whether this file exists using</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">file.exists</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)</code></pre>
<p>We can use R to create and edit <code>.Rprofile</code> (warning: do not overwrite your previous <code>.Rprofile</code> - we suggest you try project-specific <code>.Rprofile</code> first):</p>
<pre class="sourceCode r"><code class="sourceCode r">if(!<span class="kw">file.exists</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)) <span class="co"># only create if not already there</span>
  <span class="kw">file.create</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)    <span class="co"># (don&#39;t overwrite it)</span>
<span class="kw">file.edit</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)</code></pre>
</div>
<div id="example-.rprofile-settings" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Example <code>.Rprofile</code> settings</h3>
<p>An <code>.Rprofile</code> file is just an R script that is run at start-up. The examples at the bottom of the <code>.Rprofile</code> help file</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(<span class="st">&quot;Rprofile&quot;</span>)</code></pre>
<p>give clues as to the types of things we could place in our profile.</p>
<div id="setting-options" class="section level4">
<h4><span class="header-section-number">2.1.2.1</span> Setting options</h4>
<p>The function <code>options</code> is a list that contains a number of default options. See <code>help(&quot;options&quot;)</code> or simply type <code>options()</code> to get an idea of what we can configure. In my <code>.Rprofile</code> file, we have the line</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">prompt=</span><span class="st">&quot;R&gt; &quot;</span>, <span class="dt">digits=</span><span class="dv">4</span>, <span class="dt">show.signif.stars=</span><span class="ot">FALSE</span>)</code></pre>
<p>This changes three features.</p>
<ul>
<li>The R prompt, from the boring <code>&gt;</code> to the exciting <code>R&gt;</code>.</li>
<li>The number of digits displayed.</li>
<li>Removing the stars after significant <span class="math">\(p\)</span>-values.</li>
</ul>
<p>Typically we want to avoid adding options to the start-up file that make our code non-portable. For example, adding</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)</code></pre>
<p>to your start-up script has knock-on effects for <code>read.table</code> and related functions including <code>read.csv</code>, making them convert text strings into characters rather than into factors as is default. This may be useful for you, but it is dangerous as it may make your code less portable.</p>
</div>
<div id="setting-the-cran-mirror" class="section level4">
<h4><span class="header-section-number">2.1.2.2</span> Setting the CRAN mirror</h4>
<p>To avoid setting the CRAN mirror each time you run <code>install.packages</code> you can permanently set the mirror in your <code>.Rprofile</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">## local creates a new, empty environment
## This avoids polluting the global environment with
## the object r
<span class="kw">local</span>({
  r =<span class="st"> </span><span class="kw">getOption</span>(<span class="st">&quot;repos&quot;</span>)             
  r[<span class="st">&quot;CRAN&quot;</span>] =<span class="st"> &quot;https://cran.rstudio.com/&quot;</span>
  <span class="kw">options</span>(<span class="dt">repos =</span> r)
})</code></pre>
<p>The RStudio mirror is a virtual machine run by Amazon’s EC2 service, and it syncs with the main CRAN mirror in Austria once per day. Since RStudio is using Amazon’s CloudFront, the repository is automatically distributed around the world, so no matter where you are in the world, the data doesn’t need to travel very far, and is therefore fast to download.</p>
</div>
<div id="the-fortunes-package" class="section level4">
<h4><span class="header-section-number">2.1.2.3</span> The <code>fortunes</code> package</h4>
<p>This section illustrate what <code>.Rprofile</code> does with reference to a package that was developed for fun. The code below could easily be altered to automatically connect to a database, or ensure that the latest packages have been downloaded.</p>
<p>The <code>fortunes</code> package contains a number of memorable quotes that the community has collected over many years, called <code>R fortunes</code>. Each fortune has a number. To get fortune number <span class="math">\(50\)</span>, for example, enter</p>
<pre class="sourceCode r"><code class="sourceCode r">fortunes::<span class="kw">fortune</span>(<span class="dv">50</span>)</code></pre>
<p>It is easy to make R print out one of these nuggets of truth each time you start a session, by adding the following to <code>~/.Rprofile</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">if(<span class="kw">interactive</span>()) 
  <span class="kw">try</span>(fortunes::<span class="kw">fortune</span>(), <span class="dt">silent=</span><span class="ot">TRUE</span>)</code></pre>
<p>The <code>interactive</code> function tests whether R is being used interactively in a terminal. The <code>fortune</code> function is called within <code>try</code>. If the <code>fortunes</code> package is not available, we avoid raising an error and move on. By using <code>::</code> we avoid adding the fortunes package to our list of attached packages..</p>
<p>The function <code>.Last</code>, if it exists in the <code>.Rprofile</code>, is always run at the end of the session. We can use it to install the <code>fortunes</code> package if needed. To load the package, we use <code>require</code>, since if the package isn’t installed, the <code>require</code> function returns <code>FALSE</code> and raises a warning.</p>
<pre class="sourceCode r"><code class="sourceCode r">.Last =<span class="st"> </span>function() {
  cond =<span class="st"> </span><span class="kw">suppressWarnings</span>(!<span class="kw">require</span>(fortunes, <span class="dt">quietly=</span><span class="ot">TRUE</span>))
  if(cond) 
    <span class="kw">try</span>(<span class="kw">install.packages</span>(<span class="st">&quot;fortunes&quot;</span>), <span class="dt">silent=</span><span class="ot">TRUE</span>)
  <span class="kw">message</span>(<span class="st">&quot;Goodbye at &quot;</span>, <span class="kw">date</span>(), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)
}</code></pre>
</div>
<div id="useful-functions" class="section level4">
<h4><span class="header-section-number">2.1.2.4</span> Useful functions</h4>
<p>You can also load useful functions in <code>.Rprofile</code>. For example, we could load the following two functions for examining data frames:</p>
<pre class="sourceCode r"><code class="sourceCode r">## ht == headtail
ht =<span class="st"> </span>function(d, <span class="dt">n=</span><span class="dv">6</span>) <span class="kw">rbind</span>(<span class="kw">head</span>(d, n), <span class="kw">tail</span>(d, n))
  
## Show the first 5 rows &amp; first 5 columns of a data frame
hh =<span class="st"> </span>function(d) d[<span class="dv">1</span>:<span class="dv">5</span>, <span class="dv">1</span>:<span class="dv">5</span>]</code></pre>
<p>and a function for setting a nice plotting window:</p>
<pre class="sourceCode r"><code class="sourceCode r">setnicepar =<span class="st"> </span>function(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">mgp =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="fl">0.4</span>, <span class="dv">0</span>), 
                      <span class="dt">tck =</span> -.<span class="dv">01</span>, <span class="dt">cex.axis =</span> <span class="fl">0.9</span>, 
                      <span class="dt">las =</span> <span class="dv">1</span>, <span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), ...) {
    <span class="kw">par</span>(<span class="dt">mar =</span> mar, <span class="dt">mgp =</span> mgp, <span class="dt">tck =</span> tck,
        <span class="dt">cex.axis =</span> cex.axis, <span class="dt">las =</span> las, 
        <span class="dt">mfrow =</span> mfrow, ...)
}</code></pre>
<p>Note that these functions are for personal use and are unlikely to interfere with code from other people. For this reason even if you use a certain package every day, we don’t recommend loading it in your <code>.Rprofile</code>. Also beware the dangers of loading many functions by default: it may make your code less portable. Another downside of putting functions in your <code>.Rprofile</code> is that it can clutter-up your work space: when you run the <code>ls()</code> command, your <code>.Rprofile</code> functions will appear. Also if you run <code>rm(list=ls())</code>, your functions will be deleted.</p>
<p>One neat trick to overcome this issue is to use hidden objects and environments. When an object name starts with <code>.</code>, by default it doesn’t appear in the output of the <code>ls()</code> function</p>
<pre class="sourceCode r"><code class="sourceCode r">.obj =<span class="st"> </span><span class="dv">1</span>
<span class="st">&quot;.obj&quot;</span> %in%<span class="st"> </span><span class="kw">ls</span>()</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>This concept also works with environments. In the <code>.Rprofile</code> file we can create a <em>hidden</em> environment</p>
<pre class="sourceCode r"><code class="sourceCode r">.env =<span class="st"> </span><span class="kw">new.env</span>()</code></pre>
<p>and then add functions to this environment</p>
<pre class="sourceCode r"><code class="sourceCode r">.env$ht =<span class="st"> </span>function(d, <span class="dt">n =</span> <span class="dv">6</span>) <span class="kw">rbind</span>(<span class="kw">head</span>(d, n), <span class="kw">tail</span>(d, n))</code></pre>
<p>At the end of the <code>.Rprofile</code> file, we use <code>attach</code>, which makes it possible to refer to objects in the environment by their names alone.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attach</span>(.env)</code></pre>
<!--
\sidenote{I also have a function that shows the size of
  objects in my R session (\url{http://stackoverflow.com/q/1358003/203420}).}-->
</div>
</div>
<div id="renviron" class="section level3">
<h3><span class="header-section-number">2.1.3</span> The <code>.Renviron</code> file</h3>
<p>The <code>.Renviron</code> file is used to store system variables. It follows a similar start up routine to the <code>.Rprofile</code> file: R first looks for a global <code>.Renviron</code> file, then for local versions. A typical use of the <code>.Renviron</code> file is to specify the <code>R_LIBS</code> path</p>
<pre><code>## Linux
R_LIBS=~/R/library

## Windows
R_LIBS=C:/R/library</code></pre>
<p>This variable points to a directory where R packages will be installed. When <code>install.packages</code> is called, new packages will be stored in <code>R_LIBS</code>.</p>
<p>Another common use of <code>.Renviron</code> is to store API keys that will be available from one session to another.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> The following line in <code>.Renviron</code>, for example, sets the <code>ZEIT_KEY</code> environment variable which is used in the package <a href="https://cran.r-project.org/web/packages/diezeit/">diezeit</a> package:</p>
<pre><code>ZEIT_KEY=PUT_YOUR_KEY_HERE</code></pre>
<p>You will need to sign-in and start a new R session for the environment variable (accessed by <code>Sys.getenv</code>) to be visible. To test if the example API key has been successfully added as an environment variable, run the following:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.getenv</span>(<span class="st">&quot;ZEIT_KEY&quot;</span>)</code></pre>
<p>Use of the <code>.Renviron</code> file for storing settings such as library paths and API keys is efficient because it reduces the need to update your settings for every R session. Furthermore, the same <code>.Renviron</code> file will work across different platforms so keep it stored safely.</p>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">2.1.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What are the three locations where they are stored? Where are these locations on your computer?</li>
<li>For each location, does a <code>.Rprofile</code> or <code>.Renviron</code> file exist?</li>
<li>Create a <code>.Rprofile</code> file in your current working directory that prints the message <code>Happy efficient R programming</code> each time you start R at this location.</li>
</ol>
</div>
</div>
<div id="blas-and-alternative-r-interpreters" class="section level2">
<h2><span class="header-section-number">2.2</span> BLAS and alternative R interpreters</h2>
<p>In this section we cover a few system-level options available to speed-up R’s performance. Note that for many applications stability rather than speed is a priority, so these should only be considered if a) you have exhausted options for writing your R code more efficiently and b) you are confident tweaking system-level settings. This should therefore be seen as an advanced section: if you are not interested in speeding-up base R, feel free to skip to the next section of hardware.</p>
<p>Many statistical algorithms manipulate matrices. R uses the Basic Linear Algebra System (BLAS) framework for linear algebra operations. Whenever we carry out a matrix operation, such as transpose or finding the inverse, we use the underlying BLAS library. By switching to a different BLAS library, it may be possible to speed-up your R code. Changing your BLAS library is straightforward if you are using Linux, but can be tricky for Windows users.</p>
<p>The two open source alternative BLAS libraries are <a href="http://math-atlas.sourceforge.net/">ATLAS</a> and <a href="https://github.com/xianyi/OpenBLAS">OpenBLAS</a>. The <a href="https://software.intel.com/en-us/intel-mkl">Intel MKL</a> is another implementation, designed for Intel processors by Intel and used in Revolution R (described in the next section) but it requires licensing fees. The MKL library is provided with the Revolution analytics system. Depending on your application, by switching you BLAS library, linear algebra operations can run several times faster than with the base BLAS routines.</p>
<!--
 Currently only works for linux.
 
To find out what BLAS library you are using on Linux the following function, from the [benchmarkme](https://github.com/csgillespie/benchmarkme) package can be used:


```r
# devtools::install_github("csgillespie/benchmarkme")
benchmarkme::get_linear_algebra()
```
-->
<div id="revolution-r" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Revolution R</h3>
<p>Revolution R is the main software product offered by Revolution Analytics. It is “100%” compatible with R“, supporting all available packages through the MRAN package repository. Revolution R provides faster performance on for certain functions than base R, through its use of MKL, an implementation of BLAS (as described above). Revolution R is available as a free and open source product, ‘Revolution R Open’ (RRO), and is reported to be faster than base R installations.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<p>Additional benchmarks reported by <span class="citation">Eddelbuettel (2010)</span> show the MKL implementations of R used in RRO and the commercial edition to be substantially faster than the reference case.</p>
</div>
<div id="other-interpreters" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Other interpreters</h3>
<p>Due to the popularity of R, it now possible to use alternative interpreters (the interpreter is where the code is run). There are currently four possibilities</p>
<ul>
<li><p><a href="http://www.pqr-project.org/">pqrR</a> (pretty quick R) is a new version of the R interpreter. One major downside, is that it is based on R-2.15.0. The developer (Radford Neal) has made many improvements, some of which have now been incorporated into base R. <strong>pqR</strong> is an open-source project licensed under the GPL. One notable improvement in pqR is that it is able to do some numeric computations in parallel with each other, and with other operations of the interpreter, on systems with multiple processors or processor cores.</p></li>
<li><p><a href="http://www.renjin.org/">Renjin</a> reimplements the R interpreter in Java, so it can run on the Java Virtual Machine (JVM). Since R will be pure Java, it can run anywhere.</p></li>
<li><p><a href="http://spotfire.tibco.com/">Tibco</a> created a C++ based interpreter called TERR.</p></li>
<li><p>Oracle also offer an R-interpreter that uses Intel’s mathematics library and therefore achieves a higher performance without changing R’s core.</p></li>
</ul>
<p>At the time of writing, switching interpreters is something to consider carefully. But in the future, it may become more routine.</p>
</div>
<div id="useful-blasbenchmarking-resources" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Useful BLAS/benchmarking resources</h3>
<ul>
<li>The <a href="https://cran.r-project.org/web/packages/gcbd/">gcbd</a> package benchmarks performance of a few standard linear algebra operations across a number of different BLAS libraries as well as a GPU implementation. It has an excellent vignette summarising the results.</li>
<li><a href="http://brettklamer.com/diversions/statistical/faster-blas-in-r/">Brett Klamer</a> provides a nice comparison of ATLAS, OpenBLAS and Intel MKL BLAS libraries. He also gives a description of how to install the different libraries.</li>
<li>The official R manual <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#BLAS">section</a> on BLAS.</li>
</ul>
</div>
<div id="exercises-1" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What BLAS system is your version of R using?</li>
</ol>
<!--chapter:end:02-set-up-->
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<pre class="sourceCode r"><code class="sourceCode r">if(!(<span class="st">&quot;benchmarkme&quot;</span> %in%<span class="st"> </span><span class="kw">installed.packages</span>())) {
  drat::<span class="kw">addRepo</span>(<span class="st">&quot;csgillespie&quot;</span>)
  <span class="kw">install.packages</span>(<span class="st">&quot;benchmarkme&quot;</span>)
}</code></pre>
</div>
</div>
</div>
<div id="efficient-hardware" class="section level1">
<h1><span class="header-section-number">3</span> Efficient hardware</h1>
<p>In the previous chapter we saw how relatively simple tweaks to our system set-up can result in substantial time savings. In this chapter we explore the relationship between computer hardware and the speed of code execution. The goal is to help you decide whether the benefits of upgrading your hardware are worth the cost.</p>
<p>We’ll begin with an introductory section on computer storage and memory and how it is measured, before moving on to individual computer components.</p>
<div id="introduction-what-is-a-byte" class="section level2">
<h2><span class="header-section-number">3.1</span> Introduction: what is a byte?</h2>
<p>A computer cannot store “numbers” or “letters”. The only thing a computer can store and work with is bits. A bit is binary, it is either a <span class="math">\(0\)</span> or a <span class="math">\(1\)</span>. In fact from a physics perspective, a bit is just a blip of electricity that either is or isn’t there.</p>
<p>In the past the ASCII character set dominated computing. This set defines <span class="math">\(128\)</span> characters including <span class="math">\(0\)</span> to <span class="math">\(9\)</span>, upper and lower case alpha-numeric and a few control characters such as a new line. To store these characters required <span class="math">\(7\)</span> bits since <span class="math">\(2^7 = 128\)</span>, but <span class="math">\(8\)</span> bits were typically used for performance <a href="http://stackoverflow.com/q/14690159/203420">reasons</a>. Table 3.1 gives the binary representation of the first few characters.</p>
<table>
<thead>
<tr class="header">
<th align="left">Bit representation</th>
<th align="left">Character</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math">\(01000001\)</span></td>
<td align="left">A</td>
</tr>
<tr class="even">
<td align="left"><span class="math">\(01000010\)</span></td>
<td align="left">B</td>
</tr>
<tr class="odd">
<td align="left"><span class="math">\(01000011\)</span></td>
<td align="left">C</td>
</tr>
<tr class="even">
<td align="left"><span class="math">\(01000100\)</span></td>
<td align="left">D</td>
</tr>
<tr class="odd">
<td align="left"><span class="math">\(01000101\)</span></td>
<td align="left">E</td>
</tr>
<tr class="even">
<td align="left"><span class="math">\(01010010\)</span></td>
<td align="left">R</td>
</tr>
</tbody>
</table>
<p>Table 3.1: The bit representation of a few ASCII characters.</p>
<p>The limitation of only gives having <span class="math">\(256\)</span> characters led to the development of Unicode, a standard framework aimed at creating a single character set for every reasonable writing system. Typically, Unicode characters require sixteen bits of storage.</p>
<p>Eight bits is one byte, or ASCII character. So two ASCII characters would use two bytes or <span class="math">\(16\)</span> bits. A pure text document containing <span class="math">\(100\)</span> characters would use <span class="math">\(100\)</span> bytes (<span class="math">\(800\)</span> bits). Note that mark-up, such as font information or meta-data, can impose a substantial memory overhead: an empty <code>.docx</code> file requires about <span class="math">\(3,700\)</span> bytes of storage.</p>
<p>When computer scientists first started to think about computer memory, they noticed that <span class="math">\(2^{10} = 1024 \simeq 10^3\)</span> and <span class="math">\(2^{20} =1,048,576\simeq 10^6\)</span>, so they adopted the short hand of kilo- and mega-bytes. Of course, <em>everyone</em> knew that it was just a short hand, and it was really a binary power. When computers became more wide spread, foolish people like you and me just assumed that kilo actually meant <span class="math">\(10^3\)</span> bytes.</p>
<p>Fortunately the IEEE Standards Board intervened and created conventional, internationally adopted definitions of the International System of Units (SI) prefixes. So a kilobyte (KB) is <span class="math">\(10^3 = 1000\)</span> bytes and a megabyte (MB) is <span class="math">\(10^6\)</span> bytes or <span class="math">\(10^3\)</span> kilobytes (see table 3.2). A petabyte is approximately <span class="math">\(100\)</span> million drawers filled with text. Astonishingly Google processes around <span class="math">\(20\)</span> petabytes of data every day.</p>
<table>
<thead>
<tr class="header">
<th align="left">Factor</th>
<th align="left">Name</th>
<th align="left">Symbol</th>
<th align="left">Origin</th>
<th align="left"></th>
<th align="left">Derivation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span class="math">\(2^{10}\)</span></td>
<td align="left">kibi</td>
<td align="left">Ki</td>
<td align="left">Kilobinary:</td>
<td align="left"><span class="math">\((2^{10})^1\)</span></td>
<td align="left">Kilo: <span class="math">\((10^3)^1\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math">\(2^{20}\)</span></td>
<td align="left">mebi</td>
<td align="left">Mi</td>
<td align="left">Megabinary:</td>
<td align="left"><span class="math">\((2^{10})^2\)</span></td>
<td align="left">Mega: <span class="math">\((10^3)^2\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math">\(2^{30}\)</span></td>
<td align="left">gibi</td>
<td align="left">Gi</td>
<td align="left">Gigabinary:</td>
<td align="left"><span class="math">\((2^{10})^3\)</span></td>
<td align="left">Giga: <span class="math">\((10^3)^3\)</span></td>
</tr>
<tr class="even">
<td align="left"><span class="math">\(2^{40}\)</span></td>
<td align="left">tebi</td>
<td align="left">Ti</td>
<td align="left">Terabinary:</td>
<td align="left"><span class="math">\((2^{10})^4\)</span></td>
<td align="left">Tera: <span class="math">\((10^3)^4\)</span></td>
</tr>
<tr class="odd">
<td align="left"><span class="math">\(2^{50}\)</span></td>
<td align="left">pebi</td>
<td align="left">Pi</td>
<td align="left">Petabinary:</td>
<td align="left"><span class="math">\((2^{10})^5\)</span></td>
<td align="left">Peta: <span class="math">\((10^3)^5\)</span></td>
</tr>
</tbody>
</table>
<p>Table 3.2: Data conversion table. Credit: <a href="physics.nist.gov/cuu/Units/binary.html"><a href="http://physics.nist.gov/cuu/Units/binary.html" class="uri">http://physics.nist.gov/cuu/Units/binary.html</a></a></p>
<p>Even though there is now an agreed standard for discussing memory, that doesn’t mean that everyone follows it. Microsoft Windows, for example, uses 1MB to mean <span class="math">\(2^{20}\)</span>B. Even more confusing the capacity of a <span class="math">\(1.44\)</span>MB floppy disk is a mixture, <span class="math">\(1\text{MB} = 10^3 \times 2^{10}\)</span>B.</p>
</div>
<div id="random-access-memory-ram" class="section level2">
<h2><span class="header-section-number">3.2</span> Random access memory: RAM</h2>
<p>Random access memory (RAM) is a type of computer memory that can be accessed randomly: any byte of memory can be accessed without touching the preceding bytes. RAM is found in computers, phones, tablets and even printers. The amount of RAM R has access to is directly related to the size of data sets that it can process. As the amount of RAM your machine has increases, the size of datasets you can analyse also increases, so it is important to have sufficient RAM for your work.</p>
<div class="figure">
<img src="figures/ram.jpg" alt="Two 8 GB DDR4-2133 288-pin ECC 1.2 V RDIMMs. Credit: https://commons.wikimedia.org/wiki/File:Two_8_GB_DDR4-2133_ECC_1.2_V_RDIMMs.jpg" /><p class="caption">Two 8 GB DDR4-2133 288-pin ECC 1.2 V RDIMMs. Credit: <a href="https://commons.wikimedia.org/wiki/File:Two_8_GB_DDR4-2133_ECC_1.2_V_RDIMMs.jpg" class="uri">https://commons.wikimedia.org/wiki/File:Two_8_GB_DDR4-2133_ECC_1.2_V_RDIMMs.jpg</a></p>
</div>
<p>Figure 3.1: Two <span class="math">\(8\)</span>GB RAM cards. Credit: <a href="https://commons.wikimedia.org/wiki/File:Two_8_GB_DDR4-2133_ECC_1.2_V_RDIMMs.jpg" class="uri">https://commons.wikimedia.org/wiki/File:Two_8_GB_DDR4-2133_ECC_1.2_V_RDIMMs.jpg</a></p>
<p>Even if the original data set is relatively small, the analysis can generate large objects. For example, suppose we want to perform standard cluster analysis. The built-in data set <code>USAarrests</code>, is a data frame with <span class="math">\(50\)</span> rows and <span class="math">\(4\)</span> columns. Each row corresponds to a state in the USA</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(USArrests, <span class="dv">3</span>)</code></pre>
<pre><code>##         Murder Assault UrbanPop Rape
## Alabama   13.2     236       58 21.2
## Alaska    10.0     263       48 44.5
## Arizona    8.1     294       80 31.0</code></pre>
<p>If we want to group states that have similar crime statistics, a standard first step is to calculate the distance or similarity matrix</p>
<pre class="sourceCode r"><code class="sourceCode r">d =<span class="st"> </span><span class="kw">dist</span>(USArrests)</code></pre>
<p>When we inspect the object size of the original data set and the distance object using the <code>pryr</code> package</p>
<pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">object_size</span>(USArrests)</code></pre>
<pre><code>## 5.23 kB</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">pryr::<span class="kw">object_size</span>(d)</code></pre>
<pre><code>## 14.3 kB</code></pre>
<p>we have managed to create an object that is three times larger than the original data set. In fact the object <code>d</code> is a symmetric <span class="math">\(n \times n\)</span> matrix, where <span class="math">\(n\)</span> is the number of rows in <code>USAarrests</code>. Clearly, as <code>n</code> increases the size of <code>d</code> increases at rate <span class="math">\(O(n^2)\)</span>. So if our original data set contained <span class="math">\(10,000\)</span> records, the associated distance matrix would contain almost <span class="math">\(10^8\)</span> values. Of course since the matrix is symmetric, this corresponds to around <span class="math">\(50\)</span> million unique values. A rough rule of thumb is that your RAM should be three times the size of your data set.</p>
<p>Another benefit of having increasing the amount of onboard RAM is that the ‘garbage collector’, a process that runs periodically to free-up system memory occupied by R, is called less often (we will cover this in more detail in chapter XXX).</p>
<p>It is straightforward to determine how much RAM you have. Under Windows,</p>
<ol style="list-style-type: decimal">
<li>Clicking the <code>Start</code> button picture of the Start button, then right-clicking Computer. Next click on <code>Properties</code>.</li>
<li>In the <code>System</code> section, you can see the amount of RAM your computer has next to the <code>Installed memory (RAM)</code> section. Windows reports how much RAM it can use, not the amount installed. This is only an issue if you are using a 32-bit version of Windows.</li>
</ol>
<p>In Mac, click the Apple menu. Select <code>About This Mac</code> and a window appears with the relevant information.</p>
<p>On almost all Unix-based OSs, you can find out how much RAM you have using the code <code>vmstat</code>, whilst on all Linux distributions, you can use the command <code>free</code>. Using this in conjuction with the <code>-h</code> tag will provide the answer in human readable format, as illustrated below for a 16 Gb machine:</p>
<pre><code>$ free -h
             total       used       free     
Mem:           15G       4.0G        11G </code></pre>
<p>It is sometimes possible to increase your computer’s RAM. On the computer motherboard, there are typically <span class="math">\(2\)</span> or <span class="math">\(4\)</span> RAM or memory slots. If you have free slots, then you can add more RAM. However, it is common that all slots are already taken. This means that to upgrade your computer’s memory, some or all of the RAM will have to be removed. To go from <span class="math">\(8\)</span>GB to <span class="math">\(16\)</span>GB, for example, you may have to discard the two <span class="math">\(4\)</span>GB RAM cards and replace them with two <span class="math">\(8\)</span>GB cards. Increasing your laptop/desktop from 4GB to <span class="math">\(16\)</span>GB or <span class="math">\(32\)</span>GB is cheap and should definitely be considered. As R Core member Uwe Ligges states,</p>
<pre class="sourceCode r"><code class="sourceCode r">fortunes::<span class="kw">fortune</span>(<span class="dv">192</span>)</code></pre>
<pre><code>## 
## RAM is cheap and thinking hurts.
##    -- Uwe Ligges (about memory requirements in R)
##       R-help (June 2007)</code></pre>
<p>It is a testament to the design of R that it is still relevant and its popularity is growing. Ross Ihaka, one of the originators of the R programming language, made a throw-away comment in 2003:</p>
<pre class="sourceCode r"><code class="sourceCode r">fortunes::<span class="kw">fortune</span>(<span class="dv">21</span>)</code></pre>
<pre><code>## 
## I seem to recall that we were targetting 512k Macintoshes. In our dreams
## we might have seen 16Mb Sun.
##    -- Ross Ihaka (in reply to the question whether R&amp;R thought when they
##       started out that they would see R using 16G memory on a dual Opteron
##       computer)
##       R-help (November 2003)</code></pre>
<p>Considering that a standard smart phone now contains <span class="math">\(1\)</span>GB of RAM, the fact that R was designed for “basic” computers, but can scale across clusters is impressive. R’s origins on computers with limited resources helps explain its efficiency at dealing with large datasets.</p>
<div id="exercises-2" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Exercises</h3>
<p>The following two exercises aim to help you determine if it is worthwhile upgrading your RAM.</p>
<ol style="list-style-type: decimal">
<li>R loads everything into memory, i.e. your computers RAM. How much RAM do you have?</li>
<li>Using Google, how much does it cost (in pounds) to double the amount of available RAM on your system?</li>
</ol>
</div>
</div>
<div id="hard-drives-hdd-vs-ssd" class="section level2">
<h2><span class="header-section-number">3.3</span> Hard drives: HDD vs SSD</h2>
<p>Unless you have a fairly expensive laptop your computer probably has a standard hard disk drive (HDD). HDDs were first introduced by IBM in 1956. Data is stored using magnetism on a rotating platter, as shown in Figure 3.2. The faster the platter spins, the faster the HDD can perform. Many laptop drives spin at either <span class="math">\(5400\)</span>RPM (Revolutions per Minute) or <span class="math">\(7200\)</span>RPM. The major advantage of HDDs is that they are cheap, making a <span class="math">\(1\)</span>TB laptop standard.</p>
<div class="figure">
<img src="figures/627px-Laptop-hard-drive-exposed.jpg" alt="A standard 2.5&quot; hard drive, found in most laptops. Credit: https://en.wikipedia.org/wiki/Hard_disk_drive" /><p class="caption">A standard 2.5&quot; hard drive, found in most laptops. Credit: <a href="https://en.wikipedia.org/wiki/Hard_disk_drive" class="uri">https://en.wikipedia.org/wiki/Hard_disk_drive</a></p>
</div>
<p>Figure 3.1: A standard 2.5&quot; hard drive, found in most laptops. Credit: <a href="https://en.wikipedia.org/wiki/Hard_disk_drive" class="uri">https://en.wikipedia.org/wiki/Hard_disk_drive</a></p>
<p>Solid state drives (SSDs) can be thought of as large, but more sophisticated versions of USB sticks. They have no moving parts and information is stored in microchips. Since there are no moving parts, reading/writing is much quicker. SSDs have other benefits: they are quieter, allow faster boot time (no ‘spin up’ time) and require less power (more battery life).</p>
<p>The read/write speed for a standard HDD is usually in the region of <span class="math">\(50-120\)</span>MB/s (usually closer to <span class="math">\(50\)</span>MB). For SSDs, speeds are typically over <span class="math">\(200\)</span>MB/s. For top-of-the-range models this can approach <span class="math">\(500\)</span>MB/s. If you’re wondering, read/write speeds for RAM is around <span class="math">\(2-20\)</span>GB/s. So at best SSDs are at least one order of magnitude slower than RAM, but still faster than standard HDDs.</p>
</div>
<div id="operating-systems-32-bit-or-64-bit" class="section level2">
<h2><span class="header-section-number">3.4</span> Operating systems: 32-bit or 64-bit</h2>
<p>When we suggest that you should just buy more RAM, this assumes that you are using a <span class="math">\(64\)</span>-bit operating system. A <span class="math">\(32\)</span>-bit machine can access at most only <span class="math">\(4\)</span>GB of RAM. Although some CPUs offer solutions to this limitation, if you are running a <span class="math">\(32\)</span>-bit operating system, then R is limited to around <span class="math">\(3\)</span>GB RAM. If you are running a <span class="math">\(64\)</span>-bit operating system, but only a <span class="math">\(32\)</span>-bit version of R, then you have access to slightly more memory (but not much). Modern systems should run a <span class="math">\(64\)</span>-bit operating system, with a <span class="math">\(64\)</span>-bit version of R. Your memory limit is now measured as <span class="math">\(8\)</span> terabytes for Windows machines and <span class="math">\(128\)</span>TB for Unix-based OSs.</p>
<p>To find precise details consult the R help pages <code>help(&quot;Memory-limits&quot;)</code> and <code>help(&quot;Memory&quot;)</code>.</p>
<div id="exercises-3" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Exercises</h3>
<p>These exercises aim to condense the previous section into the key points.</p>
<ol style="list-style-type: decimal">
<li>Are you using a <span class="math">\(32\)</span>-bit or <span class="math">\(64\)</span>-bit operating system?</li>
<li>Are you using <span class="math">\(32\)</span>-bit or <span class="math">\(64\)</span>-bit version of R?</li>
<li>What are the results of running the command <code>memory.limit()</code>?</li>
</ol>
</div>
</div>
<div id="central-processing-unit-cpu" class="section level2">
<h2><span class="header-section-number">3.5</span> Central processing unit (CPU)</h2>
<p>The central processing unit (CPU), or the processor, is the brains of a computer. The CPU is responsible for performing numerical calculations. The faster the processor, the faster our code will run. The clock speed (or clock rate, measured in hertz) is frequency with which the CPU executes instructions. The faster the clock speed, the more instructions a CPU can execute in a section. CPU clock speed for a single CPU has been fairly static in the last couple of years, hovering around 3.4GHz (see figure 3.3).</p>
<p><img src="_main_files/figure-html/unnamed-chunk-29-1.png" /><br /> Figure 3.3: CPU clock speed. The data for this figure was collected from web-forum and wikipedia. It is intended to indicate general trends in CPU speed.</p>
<p>Unfortunately we can’t simply use clock speeds to compare CPUs, since the internal architecture of a CPU plays a crucial role in determining the CPU performance. The R package <code>benchmarkme</code> provides functions for benchmarking your system and contains data from previous benchmarks. Figure 3.4 shows the relative performance for eight different CPUs. All eight processors are Intel. The fastest processor in this benchmark study was the i7 CPU 870, which was released in 2009. In comparison, the Xeon Processor X3220, released in 2007, is over three times slower.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-30-1.png" /><br /> Figure 3.4: CPU benchmarks from the R package, <code>benchmarkme</code>. Even point represents an individual CPU result.</p>
</div>
<div id="cloud-computing" class="section level2">
<h2><span class="header-section-number">3.6</span> Cloud computing</h2>
<p>Cloud computing uses networks of remote servers, instead of a local computer, to store and analyse data. It is now becoming increasingly popular to rent cloud computing resources.</p>
<div id="amazon-ec2" class="section level3">
<h3><span class="header-section-number">3.6.1</span> Amazon EC2</h3>
<p>Amazon Elastic Compute Cloud (EC2) is one of a number of providers of this service. EC2 makes it (relatively) easy to run R instances in the cloud. Users can configure the operating system, CPU, hard drive type, the amount of RAM and where your project is physically located.</p>
<p>If you want to run a server in the Amazon EC2 cloud, you have to select the system you are going to boot up. There are a vast array of pre-packaged system images. Some of these images are just basic operating systems, such as Debian or Ubuntu, which require further configuration. There is also an <a href="http://www.louisaslett.com/RStudio_AMI/">Amazon machine image</a> that specifically targets R and RStudio.</p>
</div>
<div id="exercise" class="section level3">
<h3><span class="header-section-number">3.6.2</span> Exercise</h3>
<p>To assess whether you should consider cloud computing, how much does it cost to rent a machine comparable to your laptop in the cloud?</p>
<!--chapter:end:03-hardware-->
<div class="references">
<p>Eddelbuettel, Dirk. 2010. “Benchmarking Single-and Multi-Core BLAS Implementations and GPUs for Use with R.” Mathematica.</p>
</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>See <a href="https://cran.r-project.org/web/packages/httr/vignettes/api-packages.html"><code>vignette(&quot;api-packages&quot;)</code></a> from the <code>httr</code> package for more on this.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>See <a href="http://www.brodrigues.co/2014/11/11/benchmarks-r-blas-atlas-rro/">brodrigues.co/2014/11/11/benchmarks-r-blas-atlas-rro/</a>, which finds Revolution R to be marginally faster than R using OpenBLAS and ATLAS BLAS implementations and <a href="http://brettklamer.com/diversions/statistical/faster-blas-in-r/">Faster BLAS in R</a>, which does not.<a href="#fnref2">↩</a></p></li>
</ol>
</div>
<!--token:body:end-->


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
