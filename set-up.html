<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Efficient R programming</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Efficient R Programming is about increasing the amount of work you can do with R in a given amount of time. It’s about both computational and programmer efficiency.">
  <meta name="generator" content="bookdown 0.1 and GitBook 2.6.7">

  <meta property="og:title" content="Efficient R programming" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://csgillespie.github.io/efficientR/" />
  <meta property="og:image" content="https://csgillespie.github.io/efficientR/figures/f0_web.png" />
  <meta property="og:description" content="Efficient R Programming is about increasing the amount of work you can do with R in a given amount of time. It’s about both computational and programmer efficiency." />
  <meta name="github-repo" content="csgillespie/efficientR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Efficient R programming" />
  <meta name="twitter:site" content="@csgillespie" />
  <meta name="twitter:description" content="Efficient R Programming is about increasing the amount of work you can do with R in a given amount of time. It’s about both computational and programmer efficiency." />
  <meta name="twitter:image" content="https://csgillespie.github.io/efficientR/figures/f0_web.png" />

<meta name="author" content="Colin Gillespie">
<meta name="author" content="Robin Lovelace">

<meta name="date" content="2016-09-23">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="introduction.html">
<link rel="next" href="programming.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Efficient R programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to Efficient R Programming</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors"><i class="fa fa-check"></i>Authors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#who-this-book-is-for-and-how-to-use-it"><i class="fa fa-check"></i><b>1.1</b> Who this book is for and how to use it</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#what-is-efficiency"><i class="fa fa-check"></i><b>1.2</b> What is efficiency?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-is-efficient-r-programming"><i class="fa fa-check"></i><b>1.3</b> What is efficient R programming?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#why-efficiency"><i class="fa fa-check"></i><b>1.4</b> Why efficiency?</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#cross-transferable-skills-for-efficiency"><i class="fa fa-check"></i><b>1.5</b> Cross-transferable skills for efficiency</a><ul>
<li class="chapter" data-level="1.5.1" data-path="introduction.html"><a href="introduction.html#touch-typing"><i class="fa fa-check"></i><b>1.5.1</b> Touch typing</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction.html"><a href="introduction.html#consistent-style-and-code-conventions"><i class="fa fa-check"></i><b>1.5.2</b> Consistent style and code conventions</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#benchmarking-and-profiling"><i class="fa fa-check"></i><b>1.6</b> Benchmarking and profiling</a><ul>
<li class="chapter" data-level="1.6.1" data-path="introduction.html"><a href="introduction.html#benchmarking"><i class="fa fa-check"></i><b>1.6.1</b> Benchmarking</a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction.html"><a href="introduction.html#benchmarking-example"><i class="fa fa-check"></i><b>1.6.2</b> Benchmarking example</a></li>
<li class="chapter" data-level="1.6.3" data-path="introduction.html"><a href="introduction.html#profiling"><i class="fa fa-check"></i><b>1.6.3</b> Profiling</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#book-resources"><i class="fa fa-check"></i><b>1.7</b> Book resources</a><ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#r-package"><i class="fa fa-check"></i><b>1.7.1</b> R package</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction.html"><a href="introduction.html#online-version"><i class="fa fa-check"></i><b>1.7.2</b> Online version</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="set-up.html"><a href="set-up.html"><i class="fa fa-check"></i><b>2</b> Efficient set-up</a><ul>
<li class="chapter" data-level="" data-path="set-up.html"><a href="set-up.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="2.1" data-path="set-up.html"><a href="set-up.html#top-5-tips-for-an-efficient-r-set-up"><i class="fa fa-check"></i><b>2.1</b> Top 5 tips for an efficient R set-up</a></li>
<li class="chapter" data-level="2.2" data-path="set-up.html"><a href="set-up.html#operating-system"><i class="fa fa-check"></i><b>2.2</b> Operating system</a><ul>
<li class="chapter" data-level="2.2.1" data-path="set-up.html"><a href="set-up.html#operating-system-and-resource-monitoring"><i class="fa fa-check"></i><b>2.2.1</b> Operating system and resource monitoring</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="set-up.html"><a href="set-up.html#r-version"><i class="fa fa-check"></i><b>2.3</b> R version</a><ul>
<li class="chapter" data-level="2.3.1" data-path="set-up.html"><a href="set-up.html#installing-r"><i class="fa fa-check"></i><b>2.3.1</b> Installing R</a></li>
<li class="chapter" data-level="2.3.2" data-path="set-up.html"><a href="set-up.html#updating-r"><i class="fa fa-check"></i><b>2.3.2</b> Updating R</a></li>
<li class="chapter" data-level="2.3.3" data-path="set-up.html"><a href="set-up.html#installing-r-packages"><i class="fa fa-check"></i><b>2.3.3</b> Installing R packages</a></li>
<li class="chapter" data-level="2.3.4" data-path="set-up.html"><a href="set-up.html#deps"><i class="fa fa-check"></i><b>2.3.4</b> Installing R packages with dependencies</a></li>
<li class="chapter" data-level="2.3.5" data-path="set-up.html"><a href="set-up.html#updating-r-packages"><i class="fa fa-check"></i><b>2.3.5</b> Updating R packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="set-up.html"><a href="set-up.html#r-startup"><i class="fa fa-check"></i><b>2.4</b> R startup</a><ul>
<li class="chapter" data-level="2.4.1" data-path="set-up.html"><a href="set-up.html#r-startup-arguments"><i class="fa fa-check"></i><b>2.4.1</b> R startup arguments</a></li>
<li class="chapter" data-level="2.4.2" data-path="set-up.html"><a href="set-up.html#an-overview-of-rs-startup-files"><i class="fa fa-check"></i><b>2.4.2</b> An overview of R’s startup files</a></li>
<li class="chapter" data-level="2.4.3" data-path="set-up.html"><a href="set-up.html#the-location-of-startup-files"><i class="fa fa-check"></i><b>2.4.3</b> The location of startup files</a></li>
<li class="chapter" data-level="2.4.4" data-path="set-up.html"><a href="set-up.html#rprofile"><i class="fa fa-check"></i><b>2.4.4</b> The <code>.Rprofile</code> file</a></li>
<li class="chapter" data-level="2.4.5" data-path="set-up.html"><a href="set-up.html#an-example-.rprofile-file"><i class="fa fa-check"></i><b>2.4.5</b> An example <code>.Rprofile</code> file</a></li>
<li class="chapter" data-level="2.4.6" data-path="set-up.html"><a href="set-up.html#renviron"><i class="fa fa-check"></i><b>2.4.6</b> The <code>.Renviron</code> file</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="set-up.html"><a href="set-up.html#rstudio"><i class="fa fa-check"></i><b>2.5</b> RStudio</a><ul>
<li class="chapter" data-level="2.5.1" data-path="set-up.html"><a href="set-up.html#install-rstudio"><i class="fa fa-check"></i><b>2.5.1</b> Installing and updating RStudio</a></li>
<li class="chapter" data-level="2.5.2" data-path="set-up.html"><a href="set-up.html#window-pane-layout"><i class="fa fa-check"></i><b>2.5.2</b> Window pane layout</a></li>
<li class="chapter" data-level="2.5.3" data-path="set-up.html"><a href="set-up.html#rstudio-options"><i class="fa fa-check"></i><b>2.5.3</b> RStudio options</a></li>
<li class="chapter" data-level="2.5.4" data-path="set-up.html"><a href="set-up.html#autocompletion"><i class="fa fa-check"></i><b>2.5.4</b> Autocompletion</a></li>
<li class="chapter" data-level="2.5.5" data-path="set-up.html"><a href="set-up.html#keyboard-shortcuts"><i class="fa fa-check"></i><b>2.5.5</b> Keyboard shortcuts</a></li>
<li class="chapter" data-level="2.5.6" data-path="set-up.html"><a href="set-up.html#object-display-and-output-table"><i class="fa fa-check"></i><b>2.5.6</b> Object display and output table</a></li>
<li class="chapter" data-level="2.5.7" data-path="set-up.html"><a href="set-up.html#project-management"><i class="fa fa-check"></i><b>2.5.7</b> Project management</a></li>
<li class="chapter" data-level="" data-path="set-up.html"><a href="set-up.html#exercises-5"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="set-up.html"><a href="set-up.html#blas-and-alternative-r-interpreters"><i class="fa fa-check"></i><b>2.6</b> BLAS and alternative R interpreters</a><ul>
<li class="chapter" data-level="2.6.1" data-path="set-up.html"><a href="set-up.html#testing-performance-gains-from-blas"><i class="fa fa-check"></i><b>2.6.1</b> Testing performance gains from BLAS</a></li>
<li class="chapter" data-level="2.6.2" data-path="set-up.html"><a href="set-up.html#other-interpreters"><i class="fa fa-check"></i><b>2.6.2</b> Other interpreters</a></li>
<li class="chapter" data-level="2.6.3" data-path="set-up.html"><a href="set-up.html#useful-blasbenchmarking-resources"><i class="fa fa-check"></i><b>2.6.3</b> Useful BLAS/benchmarking resources</a></li>
<li class="chapter" data-level="" data-path="set-up.html"><a href="set-up.html#exercises-6"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>3</b> Efficient programming</a><ul>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#prerequisites-2"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="3.1" data-path="programming.html"><a href="programming.html#top-5-tips-for-efficient-programming"><i class="fa fa-check"></i><b>3.1</b> Top 5 tips for efficient programming</a></li>
<li class="chapter" data-level="3.2" data-path="programming.html"><a href="programming.html#general"><i class="fa fa-check"></i><b>3.2</b> General advice</a><ul>
<li class="chapter" data-level="3.2.1" data-path="programming.html"><a href="programming.html#memory-allocation"><i class="fa fa-check"></i><b>3.2.1</b> Memory allocation</a></li>
<li class="chapter" data-level="3.2.2" data-path="programming.html"><a href="programming.html#vectorised-code"><i class="fa fa-check"></i><b>3.2.2</b> Vectorised code</a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#exercise-1"><i class="fa fa-check"></i>Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="programming.html"><a href="programming.html#communicating-with-the-user"><i class="fa fa-check"></i><b>3.3</b> Communicating with the user</a><ul>
<li class="chapter" data-level="3.3.1" data-path="programming.html"><a href="programming.html#fatal-errors-stop"><i class="fa fa-check"></i><b>3.3.1</b> Fatal errors: <code class="unnumbered">stop()</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="programming.html"><a href="programming.html#warnings-warning"><i class="fa fa-check"></i><b>3.3.2</b> Warnings: <code class="unnumbered">warning()</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="programming.html"><a href="programming.html#informative-output-message-and-cat"><i class="fa fa-check"></i><b>3.3.3</b> Informative output: <code>message()</code> and <code class="unnumbered">cat()</code></a></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html#exercises-8"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="3.3.4" data-path="programming.html"><a href="programming.html#invisible-returns"><i class="fa fa-check"></i><b>3.3.4</b> Invisible returns</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="programming.html"><a href="programming.html#factors"><i class="fa fa-check"></i><b>3.4</b> Factors</a><ul>
<li class="chapter" data-level="3.4.1" data-path="programming.html"><a href="programming.html#inherent-order"><i class="fa fa-check"></i><b>3.4.1</b> Inherent order</a></li>
<li class="chapter" data-level="3.4.2" data-path="programming.html"><a href="programming.html#fixed-set-of-categories"><i class="fa fa-check"></i><b>3.4.2</b> Fixed set of categories</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="programming.html"><a href="programming.html#the-apply-family"><i class="fa fa-check"></i><b>3.5</b> The apply family</a><ul>
<li class="chapter" data-level="3.5.1" data-path="programming.html"><a href="programming.html#example-the-movies-data-set"><i class="fa fa-check"></i><b>3.5.1</b> Example: the movies data set</a></li>
<li class="chapter" data-level="3.5.2" data-path="programming.html"><a href="programming.html#type-consistency"><i class="fa fa-check"></i><b>3.5.2</b> Type consistency</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="programming.html"><a href="programming.html#caching-variables"><i class="fa fa-check"></i><b>3.6</b> Caching variables</a><ul>
<li class="chapter" data-level="3.6.1" data-path="programming.html"><a href="programming.html#function-closures"><i class="fa fa-check"></i><b>3.6.1</b> Function closures</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="programming.html"><a href="programming.html#the-byte-compiler"><i class="fa fa-check"></i><b>3.7</b> The byte compiler</a><ul>
<li class="chapter" data-level="3.7.1" data-path="programming.html"><a href="programming.html#example-the-mean-function"><i class="fa fa-check"></i><b>3.7.1</b> Example: the mean function</a></li>
<li class="chapter" data-level="3.7.2" data-path="programming.html"><a href="programming.html#compiling-code"><i class="fa fa-check"></i><b>3.7.2</b> Compiling code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>4</b> Efficient workflow</a><ul>
<li class="chapter" data-level="" data-path="workflow.html"><a href="workflow.html#prerequisites-3"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="4.1" data-path="workflow.html"><a href="workflow.html#top-5-tips-for-efficient-workflow"><i class="fa fa-check"></i><b>4.1</b> Top 5 tips for efficient workflow</a></li>
<li class="chapter" data-level="4.2" data-path="workflow.html"><a href="workflow.html#a-project-planning-typology"><i class="fa fa-check"></i><b>4.2</b> A project planning typology</a></li>
<li class="chapter" data-level="4.3" data-path="workflow.html"><a href="workflow.html#project-planning-and-management"><i class="fa fa-check"></i><b>4.3</b> Project planning and management</a><ul>
<li class="chapter" data-level="4.3.1" data-path="workflow.html"><a href="workflow.html#chunking-your-work"><i class="fa fa-check"></i><b>4.3.1</b> ‘Chunking’ your work</a></li>
<li class="chapter" data-level="4.3.2" data-path="workflow.html"><a href="workflow.html#smart"><i class="fa fa-check"></i><b>4.3.2</b> Making your workflow SMART</a></li>
<li class="chapter" data-level="4.3.3" data-path="workflow.html"><a href="workflow.html#visualising-plans-with-r"><i class="fa fa-check"></i><b>4.3.3</b> Visualising plans with R</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="workflow.html"><a href="workflow.html#package-selection"><i class="fa fa-check"></i><b>4.4</b> Package selection</a><ul>
<li class="chapter" data-level="4.4.1" data-path="workflow.html"><a href="workflow.html#searching-for-r-packages"><i class="fa fa-check"></i><b>4.4.1</b> Searching for R packages</a></li>
<li class="chapter" data-level="4.4.2" data-path="workflow.html"><a href="workflow.html#how-to-select-a-package"><i class="fa fa-check"></i><b>4.4.2</b> How to select a package</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="workflow.html"><a href="workflow.html#publication"><i class="fa fa-check"></i><b>4.5</b> Publication</a><ul>
<li class="chapter" data-level="4.5.1" data-path="workflow.html"><a href="workflow.html#dynamic-documents-with-r-markdown"><i class="fa fa-check"></i><b>4.5.1</b> Dynamic documents with R Markdown</a></li>
<li class="chapter" data-level="4.5.2" data-path="workflow.html"><a href="workflow.html#r-packages"><i class="fa fa-check"></i><b>4.5.2</b> R packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="input-output.html"><a href="input-output.html"><i class="fa fa-check"></i><b>5</b> Efficient input/output</a><ul>
<li class="chapter" data-level="" data-path="input-output.html"><a href="input-output.html#prerequisites-4"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="5.1" data-path="input-output.html"><a href="input-output.html#top-5-tips-for-efficient-data-io"><i class="fa fa-check"></i><b>5.1</b> Top 5 tips for efficient data I/O</a></li>
<li class="chapter" data-level="5.2" data-path="input-output.html"><a href="input-output.html#versatile-data-import-with-rio"><i class="fa fa-check"></i><b>5.2</b> Versatile data import with rio</a><ul>
<li class="chapter" data-level="" data-path="input-output.html"><a href="input-output.html#exercises-11"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="input-output.html"><a href="input-output.html#fread"><i class="fa fa-check"></i><b>5.3</b> Plain text formats</a><ul>
<li class="chapter" data-level="5.3.1" data-path="input-output.html"><a href="input-output.html#differences-between-fread-and-read_csv"><i class="fa fa-check"></i><b>5.3.1</b> Differences between <code>fread</code> and <code>read_csv</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="input-output.html"><a href="input-output.html#preprocessing-text-outside-r"><i class="fa fa-check"></i><b>5.3.2</b> Preprocessing text outside R</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="input-output.html"><a href="input-output.html#binary-file-formats"><i class="fa fa-check"></i><b>5.4</b> Binary file formats</a><ul>
<li class="chapter" data-level="5.4.1" data-path="input-output.html"><a href="input-output.html#native-binary-formats-rdata-or-rds"><i class="fa fa-check"></i><b>5.4.1</b> Native binary formats: Rdata or Rds?</a></li>
<li class="chapter" data-level="5.4.2" data-path="input-output.html"><a href="input-output.html#the-feather-file-format"><i class="fa fa-check"></i><b>5.4.2</b> The feather file format</a></li>
<li class="chapter" data-level="5.4.3" data-path="input-output.html"><a href="input-output.html#benchmarking-binary-file-formats"><i class="fa fa-check"></i><b>5.4.3</b> Benchmarking binary file formats</a></li>
<li class="chapter" data-level="5.4.4" data-path="input-output.html"><a href="input-output.html#protocol-buffers"><i class="fa fa-check"></i><b>5.4.4</b> Protocol Buffers</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="input-output.html"><a href="input-output.html#download"><i class="fa fa-check"></i><b>5.5</b> Getting data from the internet</a></li>
<li class="chapter" data-level="5.6" data-path="input-output.html"><a href="input-output.html#accessing-data-stored-in-packages"><i class="fa fa-check"></i><b>5.6</b> Accessing data stored in packages</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-carpentry.html"><a href="data-carpentry.html"><i class="fa fa-check"></i><b>6</b> Efficient data carpentry</a><ul>
<li class="chapter" data-level="6.1" data-path="data-carpentry.html"><a href="data-carpentry.html#top-5-tips-for-efficient-data-carpentry"><i class="fa fa-check"></i><b>6.1</b> Top 5 tips for efficient data carpentry</a><ul>
<li class="chapter" data-level="" data-path="data-carpentry.html"><a href="data-carpentry.html#prerequisites-5"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-carpentry.html"><a href="data-carpentry.html#efficient-data-frames-with-tibble"><i class="fa fa-check"></i><b>6.2</b> Efficient data frames with tibble</a></li>
<li class="chapter" data-level="6.3" data-path="data-carpentry.html"><a href="data-carpentry.html#tidying-data-with-tidyr-and-regular-expressions"><i class="fa fa-check"></i><b>6.3</b> Tidying data with tidyr and regular expressions</a><ul>
<li class="chapter" data-level="6.3.1" data-path="data-carpentry.html"><a href="data-carpentry.html#make-wide-tables-long-with-gather"><i class="fa fa-check"></i><b>6.3.1</b> Make wide tables long with <code>gather()</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="data-carpentry.html"><a href="data-carpentry.html#split-joint-variables-with-separate"><i class="fa fa-check"></i><b>6.3.2</b> Split joint variables with <code>separate()</code></a></li>
<li class="chapter" data-level="6.3.3" data-path="data-carpentry.html"><a href="data-carpentry.html#other-tidyr-functions"><i class="fa fa-check"></i><b>6.3.3</b> Other tidyr functions</a></li>
<li class="chapter" data-level="6.3.4" data-path="data-carpentry.html"><a href="data-carpentry.html#regular-expressions"><i class="fa fa-check"></i><b>6.3.4</b> Regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-carpentry.html"><a href="data-carpentry.html#dplyr"><i class="fa fa-check"></i><b>6.4</b> Efficient data processing with dplyr</a><ul>
<li class="chapter" data-level="6.4.1" data-path="data-carpentry.html"><a href="data-carpentry.html#renaming-columns"><i class="fa fa-check"></i><b>6.4.1</b> Renaming columns</a></li>
<li class="chapter" data-level="6.4.2" data-path="data-carpentry.html"><a href="data-carpentry.html#changing-column-classes"><i class="fa fa-check"></i><b>6.4.2</b> Changing column classes</a></li>
<li class="chapter" data-level="6.4.3" data-path="data-carpentry.html"><a href="data-carpentry.html#filtering-rows"><i class="fa fa-check"></i><b>6.4.3</b> Filtering rows</a></li>
<li class="chapter" data-level="6.4.4" data-path="data-carpentry.html"><a href="data-carpentry.html#data-aggregation"><i class="fa fa-check"></i><b>6.4.4</b> Data aggregation</a></li>
<li class="chapter" data-level="6.4.5" data-path="data-carpentry.html"><a href="data-carpentry.html#chaining-operations"><i class="fa fa-check"></i><b>6.4.5</b> Chaining operations</a></li>
<li class="chapter" data-level="6.4.6" data-path="data-carpentry.html"><a href="data-carpentry.html#non-standard-evaluation"><i class="fa fa-check"></i><b>6.4.6</b> Non standard evaluation</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-carpentry.html"><a href="data-carpentry.html#combining-datasets"><i class="fa fa-check"></i><b>6.5</b> Combining datasets</a></li>
<li class="chapter" data-level="6.6" data-path="data-carpentry.html"><a href="data-carpentry.html#working-with-databases"><i class="fa fa-check"></i><b>6.6</b> Working with databases</a><ul>
<li class="chapter" data-level="6.6.1" data-path="data-carpentry.html"><a href="data-carpentry.html#databases-and-dplyr"><i class="fa fa-check"></i><b>6.6.1</b> Databases and <strong>dplyr</strong></a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="data-carpentry.html"><a href="data-carpentry.html#data-processing-with-data.table"><i class="fa fa-check"></i><b>6.7</b> Data processing with data.table</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="performance.html"><a href="performance.html"><i class="fa fa-check"></i><b>7</b> Efficient optimization</a><ul>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#prerequistes"><i class="fa fa-check"></i>Prerequistes</a></li>
<li class="chapter" data-level="7.1" data-path="performance.html"><a href="performance.html#top-5-tips-for-efficient-performance"><i class="fa fa-check"></i><b>7.1</b> Top 5 tips for efficient performance</a></li>
<li class="chapter" data-level="7.2" data-path="performance.html"><a href="performance.html#performance-profvis"><i class="fa fa-check"></i><b>7.2</b> Code profiling</a><ul>
<li class="chapter" data-level="7.2.1" data-path="performance.html"><a href="performance.html#getting-started-with-profvis"><i class="fa fa-check"></i><b>7.2.1</b> Getting started with <strong>profvis</strong></a></li>
<li class="chapter" data-level="7.2.2" data-path="performance.html"><a href="performance.html#monopoloy"><i class="fa fa-check"></i><b>7.2.2</b> Example: Monopoly Simulation</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="performance.html"><a href="performance.html#efficient-base-r"><i class="fa fa-check"></i><b>7.3</b> Efficient base R</a><ul>
<li><a href="performance.html#the-if-vs-ifelse-functions">The <code>if()</code> vs <code>ifelse()</code> functions</a></li>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#sorting-and-ordering"><i class="fa fa-check"></i>Sorting and ordering</a></li>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#reversing-elements"><i class="fa fa-check"></i>Reversing elements</a></li>
<li><a href="performance.html#which-indices-are-true">Which indices are <code>TRUE</code>  </a></li>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#converting-factors-to-numerics"><i class="fa fa-check"></i>Converting factors to numerics</a></li>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#logical-and-and-or"><i class="fa fa-check"></i>Logical AND and OR</a></li>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#row-and-column-operations"><i class="fa fa-check"></i>Row and column operations</a></li>
<li><a href="performance.html#is.na-and-anyna"><code>is.na</code> and <code>anyNA</code>  </a></li>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#matrices"><i class="fa fa-check"></i>Matrices</a></li>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#the-integer-data-type"><i class="fa fa-check"></i>The integer data type</a></li>
<li class="chapter" data-level="" data-path="performance.html"><a href="performance.html#sparse-matrices"><i class="fa fa-check"></i>Sparse matrices</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="performance.html"><a href="performance.html#example-optimising-the-movie_square-function"><i class="fa fa-check"></i><b>7.4</b> Example: Optimising the <code>movie_square()</code> function</a></li>
<li class="chapter" data-level="7.5" data-path="performance.html"><a href="performance.html#performance-parallel"><i class="fa fa-check"></i><b>7.5</b> Parallel computing</a><ul>
<li class="chapter" data-level="7.5.1" data-path="performance.html"><a href="performance.html#parallel-versions-of-apply-functions"><i class="fa fa-check"></i><b>7.5.1</b> Parallel versions of apply functions</a></li>
<li class="chapter" data-level="7.5.2" data-path="performance.html"><a href="performance.html#example-snakes-and-ladders"><i class="fa fa-check"></i><b>7.5.2</b> Example: Snakes and Ladders</a></li>
<li class="chapter" data-level="7.5.3" data-path="performance.html"><a href="performance.html#exit-functions-with-care"><i class="fa fa-check"></i><b>7.5.3</b> Exit functions with care</a></li>
<li class="chapter" data-level="7.5.4" data-path="performance.html"><a href="performance.html#parallel-code-under-linux-os-x"><i class="fa fa-check"></i><b>7.5.4</b> Parallel code under Linux &amp; OS X</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="performance.html"><a href="performance.html#rcpp"><i class="fa fa-check"></i><b>7.6</b> Rcpp</a><ul>
<li class="chapter" data-level="7.6.1" data-path="performance.html"><a href="performance.html#simple-c"><i class="fa fa-check"></i><b>7.6.1</b> A simple C++ function</a></li>
<li class="chapter" data-level="7.6.2" data-path="performance.html"><a href="performance.html#cppfunction"><i class="fa fa-check"></i><b>7.6.2</b> The <code>cppFunction()</code> command</a></li>
<li class="chapter" data-level="7.6.3" data-path="performance.html"><a href="performance.html#c-types"><i class="fa fa-check"></i><b>7.6.3</b> C++ data types</a></li>
<li class="chapter" data-level="7.6.4" data-path="performance.html"><a href="performance.html#sourcecpp"><i class="fa fa-check"></i><b>7.6.4</b> The <code>sourceCpp</code> function</a></li>
<li class="chapter" data-level="7.6.5" data-path="performance.html"><a href="performance.html#vectors-and-loops"><i class="fa fa-check"></i><b>7.6.5</b> Vectors and loops</a></li>
<li class="chapter" data-level="7.6.6" data-path="performance.html"><a href="performance.html#sugar"><i class="fa fa-check"></i><b>7.6.6</b> C++ with sugar on top</a></li>
<li class="chapter" data-level="7.6.7" data-path="performance.html"><a href="performance.html#rcpp-resources"><i class="fa fa-check"></i><b>7.6.7</b> Rcpp resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="hardware.html"><a href="hardware.html"><i class="fa fa-check"></i><b>8</b> Efficient hardware</a><ul>
<li class="chapter" data-level="" data-path="hardware.html"><a href="hardware.html#prerequisites-6"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="8.1" data-path="hardware.html"><a href="hardware.html#top-5-tips-for-efficient-hardware"><i class="fa fa-check"></i><b>8.1</b> Top 5 tips for efficient hardware</a></li>
<li class="chapter" data-level="8.2" data-path="hardware.html"><a href="hardware.html#background-what-is-a-byte"><i class="fa fa-check"></i><b>8.2</b> Background: what is a byte?</a></li>
<li class="chapter" data-level="8.3" data-path="hardware.html"><a href="hardware.html#ram"><i class="fa fa-check"></i><b>8.3</b> Random access memory: RAM</a></li>
<li class="chapter" data-level="8.4" data-path="hardware.html"><a href="hardware.html#hard-drives-hdd-vs-ssd"><i class="fa fa-check"></i><b>8.4</b> Hard drives: HDD vs SSD</a></li>
<li class="chapter" data-level="8.5" data-path="hardware.html"><a href="hardware.html#operating-systems-32-bit-or-64-bit"><i class="fa fa-check"></i><b>8.5</b> Operating systems: 32-bit or 64-bit</a></li>
<li class="chapter" data-level="8.6" data-path="hardware.html"><a href="hardware.html#central-processing-unit-cpu"><i class="fa fa-check"></i><b>8.6</b> Central processing unit (CPU)</a></li>
<li class="chapter" data-level="8.7" data-path="hardware.html"><a href="hardware.html#cloud-computing"><i class="fa fa-check"></i><b>8.7</b> Cloud computing</a><ul>
<li class="chapter" data-level="8.7.1" data-path="hardware.html"><a href="hardware.html#amazon-ec2"><i class="fa fa-check"></i><b>8.7.1</b> Amazon EC2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="collaboration.html"><a href="collaboration.html"><i class="fa fa-check"></i><b>9</b> Efficient collaboration</a><ul>
<li class="chapter" data-level="" data-path="collaboration.html"><a href="collaboration.html#prerequisites-7"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="9.1" data-path="collaboration.html"><a href="collaboration.html#top-5-tips-for-efficient-collaboration"><i class="fa fa-check"></i><b>9.1</b> Top 5 tips for efficient collaboration</a></li>
<li class="chapter" data-level="9.2" data-path="collaboration.html"><a href="collaboration.html#coding-style"><i class="fa fa-check"></i><b>9.2</b> Coding style</a><ul>
<li class="chapter" data-level="9.2.1" data-path="collaboration.html"><a href="collaboration.html#reformatting-code-with-rstudio"><i class="fa fa-check"></i><b>9.2.1</b> Reformatting code with RStudio</a></li>
<li class="chapter" data-level="9.2.2" data-path="collaboration.html"><a href="collaboration.html#file-names"><i class="fa fa-check"></i><b>9.2.2</b> File names</a></li>
<li class="chapter" data-level="9.2.3" data-path="collaboration.html"><a href="collaboration.html#loading-packages"><i class="fa fa-check"></i><b>9.2.3</b> Loading packages</a></li>
<li class="chapter" data-level="9.2.4" data-path="collaboration.html"><a href="collaboration.html#commenting"><i class="fa fa-check"></i><b>9.2.4</b> Commenting</a></li>
<li class="chapter" data-level="9.2.5" data-path="collaboration.html"><a href="collaboration.html#object-names"><i class="fa fa-check"></i><b>9.2.5</b> Object names</a></li>
<li class="chapter" data-level="9.2.6" data-path="collaboration.html"><a href="collaboration.html#example-package"><i class="fa fa-check"></i><b>9.2.6</b> Example package</a></li>
<li class="chapter" data-level="9.2.7" data-path="collaboration.html"><a href="collaboration.html#assignment"><i class="fa fa-check"></i><b>9.2.7</b> Assignment</a></li>
<li class="chapter" data-level="9.2.8" data-path="collaboration.html"><a href="collaboration.html#spacing"><i class="fa fa-check"></i><b>9.2.8</b> Spacing</a></li>
<li class="chapter" data-level="9.2.9" data-path="collaboration.html"><a href="collaboration.html#indentation"><i class="fa fa-check"></i><b>9.2.9</b> Indentation</a></li>
<li class="chapter" data-level="9.2.10" data-path="collaboration.html"><a href="collaboration.html#curly-braces"><i class="fa fa-check"></i><b>9.2.10</b> Curly braces</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="collaboration.html"><a href="collaboration.html#version-control"><i class="fa fa-check"></i><b>9.3</b> Version control</a><ul>
<li class="chapter" data-level="9.3.1" data-path="collaboration.html"><a href="collaboration.html#commits"><i class="fa fa-check"></i><b>9.3.1</b> Commits</a></li>
<li class="chapter" data-level="9.3.2" data-path="collaboration.html"><a href="collaboration.html#git-integration-in-rstudio"><i class="fa fa-check"></i><b>9.3.2</b> Git integration in RStudio</a></li>
<li class="chapter" data-level="9.3.3" data-path="collaboration.html"><a href="collaboration.html#github"><i class="fa fa-check"></i><b>9.3.3</b> GitHub</a></li>
<li class="chapter" data-level="9.3.4" data-path="collaboration.html"><a href="collaboration.html#branches-forks-pulls-and-clones"><i class="fa fa-check"></i><b>9.3.4</b> Branches, forks, pulls and clones</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="collaboration.html"><a href="collaboration.html#code-review"><i class="fa fa-check"></i><b>9.4</b> Code review</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="learning.html"><a href="learning.html"><i class="fa fa-check"></i><b>10</b> Efficient learning</a><ul>
<li class="chapter" data-level="10.1" data-path="learning.html"><a href="learning.html#top-5-tips-for-efficient-learning"><i class="fa fa-check"></i><b>10.1</b> Top 5 tips for efficient learning</a></li>
<li class="chapter" data-level="10.2" data-path="learning.html"><a href="learning.html#using-rs-internal-help"><i class="fa fa-check"></i><b>10.2</b> Using R’s internal help</a><ul>
<li class="chapter" data-level="10.2.1" data-path="learning.html"><a href="learning.html#searching-r-for-topics"><i class="fa fa-check"></i><b>10.2.1</b> Searching R for topics</a></li>
<li class="chapter" data-level="10.2.2" data-path="learning.html"><a href="learning.html#finding-and-using-vignettes"><i class="fa fa-check"></i><b>10.2.2</b> Finding and using vignettes</a></li>
<li class="chapter" data-level="10.2.3" data-path="learning.html"><a href="learning.html#getting-help-on-functions"><i class="fa fa-check"></i><b>10.2.3</b> Getting help on functions</a></li>
<li class="chapter" data-level="10.2.4" data-path="learning.html"><a href="learning.html#reading-r-source-code"><i class="fa fa-check"></i><b>10.2.4</b> Reading R source code</a></li>
<li class="chapter" data-level="10.2.5" data-path="learning.html"><a href="learning.html#swirl"><i class="fa fa-check"></i><b>10.2.5</b> Swirl</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="learning.html"><a href="learning.html#online-resources"><i class="fa fa-check"></i><b>10.3</b> Online resources</a><ul>
<li class="chapter" data-level="10.3.1" data-path="learning.html"><a href="learning.html#stackoverflow"><i class="fa fa-check"></i><b>10.3.1</b> Stackoverflow</a></li>
<li class="chapter" data-level="10.3.2" data-path="learning.html"><a href="learning.html#mailing-lists-and-groups."><i class="fa fa-check"></i><b>10.3.2</b> Mailing lists and groups.</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="learning.html"><a href="learning.html#asking-a-question"><i class="fa fa-check"></i><b>10.4</b> Asking a question</a><ul>
<li class="chapter" data-level="" data-path="learning.html"><a href="learning.html#minimal-data-set"><i class="fa fa-check"></i>Minimal data set</a></li>
<li class="chapter" data-level="" data-path="learning.html"><a href="learning.html#minimal-example"><i class="fa fa-check"></i>Minimal example</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="learning.html"><a href="learning.html#learning-in-depth"><i class="fa fa-check"></i><b>10.5</b> Learning in depth</a></li>
<li class="chapter" data-level="10.6" data-path="learning.html"><a href="learning.html#spread-the-knowledge"><i class="fa fa-check"></i><b>10.6</b> Spread the knowledge</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="building-the-book-from-source.html"><a href="building-the-book-from-source.html"><i class="fa fa-check"></i><b>A</b> Building the book from source</a></li>
<li class="chapter" data-level="B" data-path="package-dependencies.html"><a href="package-dependencies.html"><i class="fa fa-check"></i><b>B</b> Package dependencies</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://www.jumpingrivers.com">Colin Gillespie</a>, Robin Lovelace</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Efficient R programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="set-up" class="section level1">
<h1><span class="header-section-number">2</span> Efficient set-up</h1>
<p>An efficient computer set-up is analogous to a well-tuned vehicle: its components work in harmony, it is well-serviced, and it is fast. This chapter describes the software decisions that will enable a productive workflow. Starting with the basics and moving to progressively more advanced topics, we explore how the operating system, R version, startup files and IDE can make your R work faster (though IDE could be seen as basic need for efficient programming). Ensuring correct configuration of these elements will have knock-on benefits in many aspects of your R workflow. That’s why we cover them at this early stage (hardware, the other fundamental consideration, is covered in the next <a href="programming.html#programming">chapter</a>. By the end of this chapter you should understand how to set-up your computer and R installation (skip to section <a href="set-up.html#r-version">2.3</a> if R is not already installed on your computer) for optimal computational and programmer efficiency. It covers the following topics:</p>
<ul>
<li>R and the operating systems: system monitoring on Linux, Mac and Windows</li>
<li>R version: how to keep your base R installation and packages up-to-date</li>
<li>R start-up: how and why to adjust your <code>.Rprofile</code> and <code>.Renviron</code> files</li>
<li>RStudio: an integrated development environment (IDE) to boost your programming productivity</li>
<li>BLAS and alternative R interpreters: looks at ways to make R faster</li>
</ul>
<p>For lazy readers, and to provide a taster of what’s to come, we begin with our ‘top 5’ tips for an efficient R set-up. It is important to understand that efficient programming is not simply the result of following a recipe of tips: understanding is vital for knowing when to use a memorised solution to a problem and when to go back to first principles. Thinking about and <em>understanding</em> R in depth, e.g. by reading this chapter carefully, will make efficiency second nature in your R workflow.</p>
<div id="prerequisites-1" class="section level3 unnumbered">
<h3>Prerequisites</h3>
<p>This chapter is primarily about base R so for the most part all you need is R installed on your computer(see Section <a href="set-up.html#install-rstudio">2.5.1</a>). We also discuss how your IDE set-up can boost efficiency and recommend RStudio. The only package used in <strong>benchmarkme</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;benchmarkme&quot;</span>)</code></pre></div>
</div>
<div id="top-5-tips-for-an-efficient-r-set-up" class="section level2">
<h2><span class="header-section-number">2.1</span> Top 5 tips for an efficient R set-up</h2>
<ol style="list-style-type: decimal">
<li>Use system monitoring to identify bottlenecks in your hardware/code</li>
<li>Keep your R installation and packages up-to-date</li>
<li>Make use of RStudio’s powerful autocompletion capabilities and shortcuts</li>
<li>Store API keys in the <code>.Renviron</code> file</li>
<li>Use BLAS if your R number crunching is too slow</li>
</ol>
</div>
<div id="operating-system" class="section level2">
<h2><span class="header-section-number">2.2</span> Operating system</h2>
<p>R works on all three consumer operating systems (OS) (Linux, Mac and Windows) as well as the server-orientated Solaris OS. R is predominantly platform-independent, meaning that it should behave in the same way on each of these platforms. This is partly facilitated by CRAN tests which ensure that R packages work on all OSs mentioned above. There are some operating system-specific quirks that may influence the choice of OS and how it is set-up for R programming in the long-term. Basic system information can be queried from within R using <code>Sys.info()</code>, as illustrated below for a selection its output:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.info</span>()
<span class="co">#R&gt; sysname     release                machine      user </span>
<span class="co">#R&gt; &quot;Linux&quot;     &quot;4.2.0-35-generic&quot;     &quot;x86_64&quot;     &quot;robin&quot; </span></code></pre></div>
<p>Translated into English, this means that R is running on a 64 bit (<code>x86_64</code>) Linux distribution (kernel version <code>4.2.0-35-generic</code>) and that the current user is <code>robin</code>. Four other pieces of information (not shown) are also produced by the command, the meaning of which is well documented in <code>?Sys.info</code>.</p>
<div class="rmdtip">
<p>
The <strong>assertive.reflection</strong> package can be used to report additional information about your computer’s operating system and R set-up with functions for asserting operating system and other system characteristics. The <code>assert_*</code> functions work by testing the truth of the statement and erroring if the statement is untrue. On a Linux system <code>assert_is_linux()</code> will run silently, whereas <code>assert_is_windows</code> will cause an error. The package can also test for IDE you are using (e.g. <code>assert_is_rstudio()</code>), the capabilities of R (<code>assert_r_has_libcurl_capability</code> etc.), and what OS tools are available (e.g. <code>assert_r_can_compile_code</code>). These functions can be useful for running code that designed only to run on one type of set-up.
</p>
</div>
<div id="operating-system-and-resource-monitoring" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Operating system and resource monitoring</h3>
<p>Minor differences aside<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>, R’s computational efficiency is broadly the same across different operating systems. This is important as it means the techniques will, in general, work equally well on different OSs. Beyond the <span class="math inline">\(32\)</span> vs <span class="math inline">\(64\)</span> bit issue (covered in the next chapter) and <em>process forking</em> (covered in Chapter <a href="performance.html#performance">7</a>) the main issue for many will be user friendliness and compatibility other programs used alongside R for work. Changing operating system can be a time consuming process so our advice is usually to stick to whatever OS you are most comfortable with.</p>
<p>Some packages (e.g. those that must be compiled and that depend on external libraries) are best installed at the operating system level (i.e. not using <code>install.packages</code>) on Linux systems. On Debian-based operating systems such as Ubuntu, these are named with the prefix <code>r-cran-</code> (see Section <a href="set-up.html#deps">2.3.4</a>).</p>
<p>Regardless of your operating system, it is good practice to track how system resources (primarily CPU and RAM use) respond when running time-consuming or RAM-intensive tasks. If you only process small datasets, system monitoring may not be necessary but when handling datasets at the limits of your computer’s resources, it can be a useful tool for identifying bottlenecks, such as when you are running low on RAM. Alongside R profiling functions such as <strong>profvis</strong> (see Section <a href="performance.html#performance-profvis">7.2</a>), system monitoring can help identify performance bottlenecks and opportunities for making tasks run faster.</p>
<p>A common use case for system monitoring of R processes is to identify how much RAM is being used and whether more is needed (covered in Chapter <a href="programming.html#programming">3</a>). System monitors also report the percentage of CPU resource allocated over time. On modern multi-threaded CPUs, many tasks will use only a fraction of the available CPU resource because R is by default a single-threaded program (see Chapter <a href="performance.html#performance-parallel">7.5</a> on parallel programming). Monitoring CPU load in this context can be useful for identifying whether R is running in parallel (see Figure <a href="set-up.html#fig:2-1">2.1</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:2-1"></span>
<img src="figures/f2_1_sysmon.png" alt="Output from a system monitor (`gnome-system-monitor` running on Ubuntu) showing the resources consumed by running the code presented in the second of the Exercises at the end of this section. The first increases RAM use, the second is single-threaded and the third is multi-threaded." width="100%" />
<p class="caption">
Figure 2.1: Output from a system monitor (<code>gnome-system-monitor</code> running on Ubuntu) showing the resources consumed by running the code presented in the second of the Exercises at the end of this section. The first increases RAM use, the second is single-threaded and the third is multi-threaded.
</p>
</div>
<p>System monitoring is a complex topic that spills over into system administration and server management. Fortunately there are many tools designed to ease monitoring all major operating systems.</p>
<ul>
<li>On Linux, the shell command <code>top</code> displays key resource use figures for most distributions. <code>htop</code> and Gnome’s <strong>System Monitor</strong> (<code>gnome-system-monitor</code>, see figure <a href="set-up.html#fig:2-1">2.1</a>) are more refined alternatives which use command-line and graphical user interfaces respectively. A number of options such as <code>nethogs</code> monitor internet usage.</li>
<li>On Windows the <strong>Task Manager</strong> provides key information on RAM and CPU use by process. This can be started in modern Windows versions by typing <code>Ctrl-Alt-Del</code> or by clicking the task bar and ‘Start Task Manager’.</li>
<li>On Mac the <strong>Activity Monitor</strong> provides similar functionality. This can be initiated from the Utilities folder in Launchpad.</li>
</ul>
<div id="exercises-1" class="section level4 unnumbered">
<h4>Exercises</h4>
<ol style="list-style-type: decimal">
<li>What is the exact version of your computer’s operating system?</li>
<li><p>Start an activity monitor then type and execute the following code. How do the results on your system compare to those presented in Figure <a href="set-up.html#fig:2-1">2.1</a>? Note: this will take around a minute or more depending on your computer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 1: Create large dataset</span>
X =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="fl">1e6</span>), <span class="dt">nrow =</span> <span class="fl">1e5</span>)
<span class="co"># 2: Find the median of each column using a single core</span>
r1 =<span class="st"> </span><span class="kw">lapply</span>(X, median)
<span class="co"># 3: Find the median of each column using many cores</span>
r2 =<span class="st"> </span>parallel::<span class="kw">mclapply</span>(X, median) <span class="co"># runs in serial on Windows</span></code></pre></div></li>
<li>What do you notice regarding CPU usage, RAM and system time, during and after each of the three operations?</li>
<li><p>Bonus question: how would the results change depending on operating system?</p></li>
</ol>
</div>
</div>
</div>
<div id="r-version" class="section level2">
<h2><span class="header-section-number">2.3</span> R version</h2>
<p>It is important to be aware that R is an evolving software project, whose behaviour changes over time. In general base R is very conservative about making changes that breaks backwards compatitability. However, packages occasionally change substantially from one release to the next; typically it depends on the age of the package. For most use cases it we recommend always using the most up-to-date version of R and packages, so you have the latest code. In some circumstances (e.g. on a production server or working in a team) you may alternatively want to use specific versions which have been tested, to ensure stability. Keeping packages up-to-date is desirable because new code tends to be more efficient, intuitive, robust and feature rich. This section explains how.</p>
<div class="rmdtip">
<p>
Previous R versions can be installed from CRAN’s archive or previous R releases. The binary versions for all OSs can be found at <a href="https://cran.r-project.org/bin/">cran.r-project.org/bin/</a>. To download binary versions for Ubuntu ‘Wily’, for example, see <a href="https://cran.r-project.org/bin/linux/ubuntu/wily/">cran.r-project.org/bin/linux/ubuntu/wily/</a>. To ‘pin’ specific versions of R packages you can use the <strong>packrat</strong> package. For more on pinning R versions and R packages see articles on RStudio’s website <a href="https://support.rstudio.com/hc/en-us/articles/200486138-Using-Different-Versions-of-R">Using-Different-Versions-of-R</a> and <a href="https://rstudio.github.io/packrat/">rstudio.github.io/packrat/</a>.
</p>
</div>
<div id="installing-r" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Installing R</h3>
<p>The method of installing R depends on your operating system.</p>
<p>On Windows, a single <code>.exe</code> file (hosted at <a href="https://cran.r-project.org/bin/windows/base/">cran.r-project.org/bin/windows/base/</a>) will install the base R package.</p>
<p>On a Mac, the latest version should be installed by downloading the <code>.pkg</code> files hosted at <a href="https://cran.r-project.org/bin/macosx/">cran.r-project.org/bin/macosx/</a>.</p>
<p>On Linux, R can be installed using package management programs on most distributions. On Ubuntu-based systems, for example, installation instructions are kept up-to-date on <a href="https://cran.r-project.org/bin/linux/ubuntu/">CRAN</a>. A condensed version of these is as follows:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> apt-add-repository https://cran.rstudio.com/bin/linux/ubuntu</code></pre></div>
<p>This command (to be executed in a Linux shell, not R!), which adds the repository to <code>/etc/apt/sources.list</code>, is recommended as it will automatically keep your operating system updated with the latest version of R.</p>
<p>In the above code <code>cran.rstudio.com</code> is the ‘mirror’ from which <code>r-base</code> and other <code>r-</code> packages can be installed using the <code>apt</code> system. The following two commands, for example, would install the base R package (a ‘bare-bones’ install) and the package <strong>rcurl</strong>, which has an external dependency:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> apt-get install r-cran-base <span class="co"># install base R</span>
<span class="kw">sudo</span> apt-get install r-cran-rcurl <span class="co"># install the rcurl package</span></code></pre></div>
<p>Typical output from the second command is illustrate below:</p>
<pre><code>The following extra packages will be installed:
  libcurl3-nss
The following NEW packages will be installed
  libcurl3-nss r-cran-rcurl
0 to upgrade, 2 to newly install, 0 to remove and 16 not to upgrade.
Need to get 699 kB of archives.
After this operation, 2,132 kB of additional disk space will be used.
Do you want to continue? [Y/n] </code></pre>
<p>Information on how to install R on other Linux distributions is provided on CRAN for <a href="https://cran.r-project.org/bin/linux/debian/">Debian</a>, <a href="https://cran.r-project.org/bin/linux/redhat/">Red Hat</a> and <a href="https://cran.r-project.org/bin/linux/suse/">SUSE</a> distributions. Package management software also supports R on other operating systems, as reported in a blog post by <a href="http://www.jason-french.com/blog/2013/03/11/installing-r-in-linux/">Jason French</a>.</p>
<p>Once R is installed it should be kept up-to-date.</p>
</div>
<div id="updating-r" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Updating R</h3>
<p>R is a mature and stable language so well-written code in base R should work on most versions. However, it is important to keep your R version relatively up-to-date, because:</p>
<ul>
<li>Bug fixes are introduced in each version, making errors less likely;</li>
<li>Performance enhancements are made from one version to the next, meaning your code may run faster in later versions;</li>
<li>Many R packages only work on recent versions on R.</li>
</ul>
<p>Release notes with details on each of these issues are hosted at <a href="https://cran.r-project.org/src/base/NEWS">cran.r-project.org/src/base/NEWS</a>. R release versions have 3 components corresponding to major.minor.patch changes. Generally 2 or 3 patches are released before the next minor increment - each ‘patch’ is released roughly every 3 months. R 3.2, for example, has consisted of 3 versions: 3.2.0, 3.2.1 and 3.2.2.</p>
<ul>
<li>On Ubuntu-based systems, new versions of R should be automatically detected through the software management system, and can be installed with <code>apt-get upgrade</code>.</li>
<li>On Mac, the latest version should be installed by the user from the <code>.pkg</code> files mentioned above.</li>
<li><p>On Windows <strong>installr</strong> package makes updating easy:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># check and install the latest R version</span>
installr::<span class="kw">updateR</span>() </code></pre></div></li>
</ul>
<p>For information about changes to expect in the next version, you can subscribe to the R’s NEWS RSS feed: <a href="http://developer.r-project.org/blosxom.cgi/R-devel/NEWS/index.rss">developer.r-project.org/blosxom.cgi/R-devel/NEWS/index.rss</a>. It’s a good way of keeping up-to-date.</p>
</div>
<div id="installing-r-packages" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Installing R packages</h3>
<p>Large projects may need several packages to be installed. In this case, the required packages can be installed at once. Using the example of packages for handling spatial data, this can be done quickly and concisely with the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pkgs =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;raster&quot;</span>, <span class="st">&quot;leaflet&quot;</span>, <span class="st">&quot;rgeos&quot;</span>) <span class="co"># package names</span>
<span class="kw">install.packages</span>(pkgs)</code></pre></div>
<p>In the above code all the required packages are installed with two not three lines, reducing typing. Note that we can now re-use the <code>pkgs</code> object to load them all:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">inst =<span class="st"> </span><span class="kw">lapply</span>(pkgs, library, <span class="dt">character.only =</span> <span class="ot">TRUE</span>) <span class="co"># load them</span></code></pre></div>
<p>In the above code <code>library(pkg[i])</code> is executed for every package stored in the text string vector. We use <code>library</code> here instead of <code>require</code> because the former produces an error if the package is not available.</p>
<p>Loading all packages at the beginning of a script is good practice as it ensures all dependencies have been installed <em>before</em> time is spent executing code. Storing package names in a character vector object such as <code>pkgs</code> is also useful because it allows us to refer back to them again and again. <!-- To provide another example, we can update only the packages named in `pkgs` with the following command: --></p>
<!-- ```{r, eval=FALSE} -->
<!-- update.packages(oldPkgs = pkgs) -->
<!-- ``` -->
</div>
<div id="deps" class="section level3">
<h3><span class="header-section-number">2.3.4</span> Installing R packages with dependencies</h3>
<p>Some packages have external dependencies (i.e. they call libraries outside R). On Unix-like systems, these are best installed onto the operating system, bypassing <code>install.packages</code>. This will ensure the necessary dependencies are installed and setup correctly alongside the R package. On Debian-based distributions such as Ubuntu, for example, packages with names starting with <code>r-cran-</code> can be search for and installed as follows (see <a href="https://cran.r-project.org/bin/linux/ubuntu/">cran.r-project.org/bin/linux/ubuntu/</a> for a list of these):</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">apt-cache</span> search r-cran- <span class="co"># search for available cran Debian packages</span>
<span class="kw">sudo</span> apt-get-install r-cran-rgdal <span class="co"># install the rgdal package (with dependencies)</span></code></pre></div>
<p>On Windows the <strong>installr</strong> package helps manage and update R packages with system-level dependencies. For example the <strong>Rtools</strong> package for compiling C/C++ code on Window can be installed with the following command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">installr::<span class="kw">install.rtools</span>() </code></pre></div>
</div>
<div id="updating-r-packages" class="section level3">
<h3><span class="header-section-number">2.3.5</span> Updating R packages</h3>
<p>An efficient R set-up will contain up-to-date packages. This can be done <em>for all packages</em> with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">update.packages</span>() <span class="co"># update installed CRAN packages</span></code></pre></div>
<p>The default for this function is for the <code>ask</code> argument to be set to <code>TRUE</code>, giving control over what is downloaded onto your system. This is generally desirable as updating dozens of large packages can consume a large proportion of available system resources.</p>
<div class="rmdtip">
<p>
To update packages automatically, you can add the line <code>update.packages(ask = FALSE)</code> to your <code>.Rprofile</code> startup file (see the next section for more on <code>.Rprofile</code>). Thanks to Richard Cotton for this tip.
</p>
</div>
<p>An even more interactive method for updating packages in R is provided by RStudio via Tools &gt; Check for Package Updates. Many such time saving tricks are enabled by RStudio, as described in <a href="set-up.html#install-rstudio">a subsequent section</a>. Next (after the exercises) we take a look at how to configure R using start-up files.</p>
<div id="exercises-2" class="section level4 unnumbered">
<h4>Exercises</h4>
<ol style="list-style-type: decimal">
<li>What version of R are you using? Is it the most up-to-date?</li>
<li>Do any of your packages need updating?</li>
</ol>
</div>
</div>
</div>
<div id="r-startup" class="section level2">
<h2><span class="header-section-number">2.4</span> R startup</h2>
<p>Every time R starts a number of things happen. It can be useful to understand this startup process, so you can make R work the way you want it, fast. This section explains how.</p>
<div id="r-startup-arguments" class="section level3">
<h3><span class="header-section-number">2.4.1</span> R startup arguments</h3>
<p>The arguments passed to the R startup command (typically simply <code>R</code> from a shell environment) determine what happens. The following arguments are particularly important from an efficiency perspective:</p>
<ul>
<li><p><code>--no-environ</code> tells R to only look for startup files in the current working directory. (Do not worry if you don’t understand what this means at present: it will become clear as the later in the section.)</p></li>
<li><p><code>--no-restore</code> tells R not to load any <code>.RData</code> files knocking around in the current working directory.</p></li>
<li><p><code>--no-save</code> tells R not to ask the user if they want to save objects saved in RAM when the session is ended with <code>q()</code>.</p></li>
</ul>
<p>Adding each of these will make R load slightly faster, and mean that slightly less user input is needed when you quit. R’s default setting of loading data from the last session automatically is potentially problematic in this context. See <a href="https://cran.r-project.org/doc/manuals/R-intro.pdf">An Introduction to R</a>, Appendix B, for more startup arguments.</p>
<div class="rmdtip">
<p>
Some of R’s startup arguments can be controlled interactively in RStudio. See the online help file <a href="https://support.rstudio.com/hc/en-us/articles/200549016-Customizing-RStudio">Customizing RStudio</a> for more on this.
</p>
</div>
</div>
<div id="an-overview-of-rs-startup-files" class="section level3">
<h3><span class="header-section-number">2.4.2</span> An overview of R’s startup files</h3>
<p>There are two special files, <code>.Renviron</code> and <code>.Rprofile</code>, which determine how R performs for the duration of the session. R searches and <em>acts on</em> both files <em>by default</em> every time it starts. To turn off this default behaviour, R can be launched with the command line options <code>--no environ</code> and <code>--no-init-file</code> respectively. Thus to launch R without your usual <code>.Rprofile</code> settings (e.g. to ensure that your personal settings are not responsible for an error) from a shell, one would enter the following:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">R</span> --no-init-file</code></pre></div>
<p>But what do these mysterious files do? Their purpose is summarised in the bullet points below and the rest of this chapter is dedicated to demystifying them.</p>
<ul>
<li><p>The primary purpose of <code>.Renviron</code> is to set <em>environment variables</em>. These are settings that relate to the operating system for telling where to find external programs and the contents of user-specific variables that other users should not have access to such as <em>API key</em>, small text strings used to verify the user when interacting web services.</p></li>
<li><p><code>.Rprofile</code> is a plain text file (which is always called <code>.Rprofile</code>, hence its name) that simply runs lines of R code every time R starts. If you want R to check for package updates each time it starts (as explained in the previous section), you simply add the relevant line somewhere in this file.</p></li>
</ul>
<p>When R starts (unless it was launched with <code>--no-environ</code>) it first searches for <code>.Renviron</code> and then <code>.Rprofile</code>, in that order. Although <code>.Renviron</code> is searched for first, we will look at <code>.Rprofile</code> first as it is simpler and for many set-up tasks more frequently useful. Both files can exist in three directories on your computer.</p>
<div class="rmdwarning">
<p>
Modification of R’s startup files should not be taken lightly. This is an advanced topic. If you modify your startup files in the wrong way, it can cause problems. We recommend proceeding with caution and take a conservative approach to modifying your startup files so that your R installation behaves similar to other ‘vanilla’ R installations, aiding reproducibility.
</p>
</div>
</div>
<div id="the-location-of-startup-files" class="section level3">
<h3><span class="header-section-number">2.4.3</span> The location of startup files</h3>
<p>Confusingly, multiple versions of these files can exist on the same computer, only one of which will be used per session. Note also that these files should only be changed with caution and if you know what you are doing. This is because they can make your R version behave differently to other R installations, potentially reducing the reproducibility of your code.</p>
<p>Files in three folders are important in this process:</p>
<ul>
<li><p><code>R_HOME</code>, the directory in which R is installed. The <code>etc</code> sub-directory can contain start-up files read early on in the start-up process. Find out where your <code>R_HOME</code> is with the <code>R.home()</code> command.</p></li>
<li><p><code>HOME</code>, the user’s home directory. Typically this is <code>/home/username</code> on Unix machines or <code>C:\Users\username</code> on Windows (since Windows 7). Ask R where your home directory with, <code>Sys.getenv(&quot;HOME&quot;)</code>.</p></li>
<li><p>R’s current working directory. This is reported by <code>getwd()</code>.</p></li>
</ul>
<p>It is important to know the location of the <code>.Rprofile</code> and <code>.Renviron</code> set-up files that are being used out of these three options. R only uses one <code>.Rprofile</code> and one <code>.Renviron</code> in any session: if you have a <code>.Rprofile</code> file in your current project, R will ignore <code>.Rprofile</code> in <code>R_HOME</code> and <code>HOME</code>. Likewise, <code>.Rprofile</code> in <code>HOME</code> overrides <code>.Rprofile</code> in <code>R_HOME</code>. The same applies to <code>.Renviron</code>: you should remember that adding project specific environment variables with <code>.Renviron</code> will de-activate other <code>.Renviron</code> files.</p>
<p>To create a project-specific start-up script, simply create a <code>.Rprofile</code> file in the project’s root directory and start adding R code, e.g. via <code>file.edit(&quot;.Rprofile&quot;)</code>. Remember that this will make <code>.Rprofile</code> in the home directory be ignored. The following commands will open your <code>.Rprofile</code> from within an R editor:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">file.edit</span>(<span class="st">&quot;~/.Rprofile&quot;</span>) <span class="co"># edit .Rprofile in HOME</span>
<span class="kw">file.edit</span>(<span class="st">&quot;.Rprofile&quot;</span>) <span class="co"># edit project specific .Rprofile</span></code></pre></div>
<div class="rmdwarning">
<p>
File paths provided by Windows operating systems will not always work in R. Specifically, if you use a path that contains single backslashes, such as <code>C:\DATA\data.csv</code>, as provided by Windows, this will generate the error: <code>Error: unexpected input in “C:\”</code>. To overcome this issue R provides two functions, <code>file.path</code> and <code>normalizePath</code>. The former can be used to specify file locations without having to use symbols to represent relative file paths, as follows: <code>file.path(“C:”, “DATA”, “data.csv”)</code>. The latter takes any input string for a file name and outputs a text string that is standard (cannonical) for the operating system. <code>normalizePath(“C:/DATA/data.csv”)</code>, for example, outputs <code>C:\DATA\data.csv</code> on a Windows machine but <code>C:/DATA/data.csv</code> on Unix-based platforms. Note that only the latter would work on both platforms so standard Unix file path notation is safe for all operating systems.
</p>
</div>
<p>Editing the <code>.Renviron</code> file in the same locations will have the same effect. The following code will create a user specific <code>.Renviron</code> file (where API keys and other cross-project environment variables can be stored), without overwriting any existing file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">user_renviron =<span class="st"> </span><span class="kw">path.expand</span>(<span class="kw">file.path</span>(<span class="st">&quot;~&quot;</span>, <span class="st">&quot;.Renviron&quot;</span>))
if(!<span class="kw">file.exists</span>(user_renviron)) <span class="co"># check to see if the file already exists</span>
  <span class="kw">file.create</span>(user_renviron)
<span class="kw">file.edit</span>(user_renviron) <span class="co"># open with another text editor if this fails</span></code></pre></div>
<div class="rmdtip">
<p>
The <strong>pathological</strong> package can help find where <code>.Rprofile</code> and <code>.Renviron</code> files are located on your system, thanks to the <code>os_path()</code> function. The output of <code>example(startup)</code> is also instructive.
</p>
</div>
<p>The location, contents and uses of each is outlined in more detail below.</p>
</div>
<div id="rprofile" class="section level3">
<h3><span class="header-section-number">2.4.4</span> The <code>.Rprofile</code> file</h3>
<p>By default, R looks for and runs <code>.Rprofile</code> files in the three locations described above, in a specific order. <code>.Rprofile</code> files are simply R scripts that run each time R runs and they can be found within <code>R_HOME</code>, <code>HOME</code> and the project’s home directory, found with <code>getwd()</code>. To check if you have a site-wide <code>.Rprofile</code>, which will run for all users on start-up, run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">site_path =<span class="st"> </span><span class="kw">R.home</span>(<span class="dt">component =</span> <span class="st">&quot;home&quot;</span>)
fname =<span class="st"> </span><span class="kw">file.path</span>(site_path, <span class="st">&quot;etc&quot;</span>, <span class="st">&quot;Rprofile.site&quot;</span>)
<span class="kw">file.exists</span>(fname)</code></pre></div>
<p>The above code checks for the presence of <code>Rprofile.site</code> in that directory. As outlined above, the <code>.Rprofile</code> located in your home directory is user-specific. Again, we can test whether this file exists using</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">file.exists</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)</code></pre></div>
<p>We can use R to create and edit <code>.Rprofile</code> (warning: do not overwrite your previous <code>.Rprofile</code> - we suggest you try project-specific <code>.Rprofile</code> first):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if(!<span class="kw">file.exists</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)) <span class="co"># only create if not already there</span>
  <span class="kw">file.create</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)    <span class="co"># (don&#39;t overwrite it)</span>
<span class="kw">file.edit</span>(<span class="st">&quot;~/.Rprofile&quot;</span>)</code></pre></div>
</div>
<div id="an-example-.rprofile-file" class="section level3">
<h3><span class="header-section-number">2.4.5</span> An example <code>.Rprofile</code> file</h3>
<p>The example below provides a taster of what goes into <code>.Rprofile</code>. Note that this is simply a usual R script, but with an unusual name. The best way to understand what is going on is to create this same script, save it as <code>.Rprofile</code> in your current working directory and then restart your R session to observer what changes. To restart your R session from within RStudio you can click <code>Session &gt; Restart R</code> or use the keyboard shortcut <code>Ctrl+Shift+F10</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># A fun welcome message</span>
<span class="kw">message</span>(<span class="st">&quot;Hi Robin, welcome to R&quot;</span>)
<span class="co"># Customise the R prompt that prefixes every command</span>
<span class="co"># (use &quot; &quot; for a blank prompt)</span>
<span class="kw">options</span>(<span class="dt">prompt =</span> <span class="st">&quot;R4geo&gt; &quot;</span>)
<span class="co"># Don&#39;t convert text strings to factors with base read functions</span>
<span class="kw">options</span>(<span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>To quickly explain each line of code: the first simply prints a message in the console each time a new R session is started. The latter two modify <em>options</em> used to change R’s behavior, first to change the prompt in the console (set to <code>R&gt;</code> by default) and second to ensure that unwanted <code>factor</code> variables are not created when <code>read.csv</code> and other functions derived from <code>read.table</code> are used to load external data into R. Note that simply adding more lines the <code>.Rprofile</code> will set more features. An important aspect of <code>.Rprofile</code> (and <code>.Renviron</code>) is that <em>each line is run once and only once for each R session</em>. That means that the options set within <code>.Rprofile</code> can easily be changed during the session. The following command run mid-session, for example, will return the default prompt:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">prompt =</span> <span class="st">&quot;&gt; &quot;</span>)</code></pre></div>
<p>More details on these, and other potentially useful <code>.Rprofile</code> options are described subsequently. For more suggestions of useful startup settings, see Examples in <code>help(&quot;Startup&quot;)</code> and online resources such as those at <a href="http://www.statmethods.net/interface/customizing.html">statmethods.net</a>. The help pages for R options (accessible with <code>?options</code>) are also worth a read before writing you own <code>.Rprofile</code>.</p>
<p>Ever been frustrated by unwanted <code>+</code> symbols that prevent copyied and pasted multi-line functions from working? These potentially annoying <code>+</code>s can be erradicated by adding <code>options(continue = &quot;  &quot;)</code> to your <code>.Rprofile</code>.</p>
<div id="setting-options" class="section level4">
<h4><span class="header-section-number">2.4.5.1</span> Setting options</h4>
<p>The function <code>options</code>, used above, contains a number of default settings. Typing <code>options()</code> provides a good indication of what be configured. Because <code>options()</code> are often related to personal preference (with few implications for reproducibility), that you will want for many your R sessions, <code>.Rprofile</code> in your home directory or in your project’s folder are sensible places to set them. Other illustrative options are shown below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">options</span>(<span class="dt">prompt =</span> <span class="st">&quot;R&gt; &quot;</span>, <span class="dt">digits =</span> <span class="dv">4</span>, <span class="dt">show.signif.stars =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>This changes three default options in a single line.</p>
<ul>
<li>The R prompt, from the boring <code>&gt;</code> to the exciting <code>R&gt;</code>.</li>
<li>The number of digits displayed.</li>
<li>Removing the stars after significant <span class="math inline">\(p\)</span>-values.</li>
</ul>
<p>Try to avoid adding options to the start-up file that make your code non-portable. The <code>stringsAsFactors = FALSE</code> argument used above, for example, to your start-up script has knock-on effects for <code>read.table</code> and related functions including <code>read.csv</code>, making them convert text strings into characters rather than into factors as is default. This may be useful for you, but can make your code less portable, so be warned.</p>
</div>
<div id="setting-the-cran-mirror" class="section level4">
<h4><span class="header-section-number">2.4.5.2</span> Setting the CRAN mirror</h4>
<p>To avoid setting the CRAN mirror each time you run <code>install.packages</code> you can permanently set the mirror in your <code>.Rprofile</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># `local` creates a new, empty environment</span>
<span class="co"># This avoids polluting .GlobalEnv with the object r</span>
<span class="kw">local</span>({
  r =<span class="st"> </span><span class="kw">getOption</span>(<span class="st">&quot;repos&quot;</span>)             
  r[<span class="st">&quot;CRAN&quot;</span>] =<span class="st"> &quot;https://cran.rstudio.com/&quot;</span>
  <span class="kw">options</span>(<span class="dt">repos =</span> r)
})</code></pre></div>
<p>The RStudio mirror is a virtual machine run by Amazon’s EC2 service, and it syncs with the main CRAN mirror in Austria once per day. Since RStudio is using Amazon’s CloudFront, the repository is automatically distributed around the world, so no matter where you are in the world, the data doesn’t need to travel very far, and is therefore fast to download.</p>
</div>
<div id="the-fortunes-package" class="section level4">
<h4><span class="header-section-number">2.4.5.3</span> The <strong>fortunes</strong> package</h4>
<p>This section illustrate what <code>.Rprofile</code> does with reference to a package that was developed for fun. The code below could easily be altered to automatically connect to a database, or ensure that the latest packages have been downloaded.</p>
<p>The <strong>fortunes</strong> package contains a number of memorable quotes that the community has collected over many years, called R fortunes. Each fortune has a number. To get fortune number <span class="math inline">\(50\)</span>, for example, enter</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fortunes::<span class="kw">fortune</span>(<span class="dv">50</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; To paraphrase provocatively, &#39;machine learning is statistics minus any</span>
<span class="co">#&gt; checking of models and assumptions&#39;.</span>
<span class="co">#&gt;    -- Brian D. Ripley (about the difference between machine learning and</span>
<span class="co">#&gt;       statistics)</span>
<span class="co">#&gt;       useR! 2004, Vienna (May 2004)</span></code></pre></div>
<p>It is easy to make R print out one of these nuggets of truth each time you start a session, by adding the following to <code>~/.Rprofile</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if(<span class="kw">interactive</span>()) 
  <span class="kw">try</span>(fortunes::<span class="kw">fortune</span>(), <span class="dt">silent =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>The <code>interactive</code> function tests whether R is being used interactively in a terminal. The <code>fortune</code> function is called within <code>try</code>. If the <strong>fortunes</strong> package is not available, we avoid raising an error and move on. By using <code>::</code> we avoid adding the <strong>fortunes</strong> package to our list of attached packages.</p>
<div class="rmdtip">
<p>
Typing <code>search()</code>, gives the list of attached packages. By using <code>fortunes::fortune()</code> we avoid adding the <strong>fortunes</strong> package to that list.
</p>
</div>
<p>The function <code>.Last</code>, if it exists in the <code>.Rprofile</code>, is always run at the end of the session. We can use it to install the <strong>fortunes</strong> package if needed. To load the package, we use <code>require</code>, since if the package isn’t installed, the <code>require</code> function returns <code>FALSE</code> and raises a warning.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">.Last =<span class="st"> </span>function() {
  cond =<span class="st"> </span><span class="kw">suppressWarnings</span>(!<span class="kw">require</span>(fortunes, <span class="dt">quietly =</span> <span class="ot">TRUE</span>))
  if(cond) 
    <span class="kw">try</span>(<span class="kw">install.packages</span>(<span class="st">&quot;fortunes&quot;</span>), <span class="dt">silent =</span> <span class="ot">TRUE</span>)
  <span class="kw">message</span>(<span class="st">&quot;Goodbye at &quot;</span>, <span class="kw">date</span>(), <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)
}</code></pre></div>
</div>
<div id="useful-functions" class="section level4">
<h4><span class="header-section-number">2.4.5.4</span> Useful functions</h4>
<p>You can use <code>.Rprofile</code> define new ‘helper’ functions or redefine existing ones so they’re faster to type. For example, we could load the following two functions for examining data frames:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ht == headtail</span>
ht =<span class="st"> </span>function(d, <span class="dt">n=</span><span class="dv">6</span>) <span class="kw">rbind</span>(<span class="kw">head</span>(d, n), <span class="kw">tail</span>(d, n))
<span class="co"># Show the first 5 rows &amp; first 5 columns of a data frame</span>
hh =<span class="st"> </span>function(d) d[<span class="dv">1</span>:<span class="dv">5</span>, <span class="dv">1</span>:<span class="dv">5</span>]</code></pre></div>
<p>and a function for setting a nice plotting window:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nice_par =<span class="st"> </span>function(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">mgp =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="fl">0.4</span>, <span class="dv">0</span>), <span class="dt">tck =</span> -<span class="fl">0.01</span>, 
                      <span class="dt">cex.axis =</span> <span class="fl">0.9</span>, <span class="dt">las =</span> <span class="dv">1</span>, <span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), ...) {
    <span class="kw">par</span>(<span class="dt">mar =</span> mar, <span class="dt">mgp =</span> mgp, <span class="dt">tck =</span> tck, <span class="dt">cex.axis =</span> cex.axis, <span class="dt">las =</span> las, 
        <span class="dt">mfrow =</span> mfrow, ...)
}</code></pre></div>
<p>Note that these functions are for personal use and are unlikely to interfere with code from other people. For this reason even if you use a certain package every day, we don’t recommend loading it in your <code>.Rprofile</code>. Shortening long function names for interactive (but not reproducible code writing). If you frequently use <code>View()</code>, for example, you may be able to save time by referring to it in abbreviated form. This is illustrated below to make it faster to view datasets (although with IDE-driven autocompletion, outlined in the next section, the time savings is less.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v =<span class="st"> </span>utils::View</code></pre></div>
<p>Also beware the dangers of loading many functions by default: it may make your code less portable. Another potentially useful setting to change in <code>.Rprofile</code> is R’s current working directory. If you want R to automatically set the working directory to the R folder of your project, for example, one would add the following line of code to the project-specific <code>.Rprofile</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setwd</span>(<span class="st">&quot;R&quot;</span>)</code></pre></div>
</div>
<div id="creating-hidden-environments-with-.rprofile" class="section level4">
<h4><span class="header-section-number">2.4.5.5</span> Creating hidden environments with .Rprofile</h4>
<p>Beyond making your code less portable, another downside of putting functions in your <code>.Rprofile</code> is that it can clutter-up your work space: when you run the <code>ls()</code> command, your <code>.Rprofile</code> functions will appear. Also if you run <code>rm(list=ls())</code>, your functions will be deleted. One neat trick to overcome this issue is to use hidden objects and environments. When an object name starts with <code>.</code>, by default it doesn’t appear in the output of the <code>ls()</code> function</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">.obj =<span class="st"> </span><span class="dv">1</span>
<span class="st">&quot;.obj&quot;</span> %in%<span class="st"> </span><span class="kw">ls</span>()
<span class="co">#&gt; [1] FALSE</span></code></pre></div>
<p>This concept also works with environments. In the <code>.Rprofile</code> file we can create a <em>hidden</em> environment</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">.env =<span class="st"> </span><span class="kw">new.env</span>()</code></pre></div>
<p>and then add functions to this environment</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">.env$ht =<span class="st"> </span>function(d, <span class="dt">n =</span> <span class="dv">6</span>) <span class="kw">rbind</span>(<span class="kw">head</span>(d, n), <span class="kw">tail</span>(d, n))</code></pre></div>
<p>At the end of the <code>.Rprofile</code> file, we use <code>attach</code>, which makes it possible to refer to objects in the environment by their names alone.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attach</span>(.env)</code></pre></div>
<!--
\sidenote{I also have a function that shows the size of
  objects in my R session (\url{http://stackoverflow.com/q/1358003/203420}).}-->
</div>
</div>
<div id="renviron" class="section level3">
<h3><span class="header-section-number">2.4.6</span> The <code>.Renviron</code> file</h3>
<p>The <code>.Renviron</code> file is used to store system variables. It follows a similar start-up routine to the <code>.Rprofile</code> file: R first looks for a global <code>.Renviron</code> file, then for local versions. A typical use of the <code>.Renviron</code> file is to specify the <code>R_LIBS</code> path, which determines where new packages are installed:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Linux</span>
<span class="ot">R_LIBS=</span>~/R/library
<span class="co"># Windows</span>
<span class="ot">R_LIBS=</span>C:/R/library</code></pre></div>
<p>After setting this, <code>install.packages</code> saves packages in the directory specified by <code>R_LIBS</code>. The location of this directory can be referred back to subsequently as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.getenv</span>(<span class="st">&quot;R_LIBS_USER&quot;</span>)
<span class="co">#&gt; [1] &quot;/home/travis/R/Library&quot;</span></code></pre></div>
<p>All currently stored environment variables can be seen by calling <code>Sys.getenv()</code> with no arguments. Note that many environment variables are already pre-set and do not need to be specified in <code>.Renviron</code>. <code>HOME</code>, for example, which can be seen with <code>Sys.getenv('HOME')</code>, is taken from the operating system’s list of environment variables. A list of the most important environment variables that can affect R’s behaviour is documented in the little known help page <code>help(&quot;environment variables&quot;)</code>.</p>
<p>To set or unset environment variable for the duration of a session, use the following commands:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.setenv</span>(<span class="st">&quot;TEST&quot;</span> =<span class="st"> &quot;test-string&quot;</span>) <span class="co"># set an environment variable for the session</span>
<span class="kw">Sys.unsetenv</span>(<span class="st">&quot;TEST&quot;</span>) <span class="co"># unset it</span></code></pre></div>
<p>Another common use of <code>.Renviron</code> is to store API keys and authentication tokens that will be available from one session to another.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> A common use case is setting the ‘envvar’ <code>GITHUB_PAT</code>, which will be detected by the <strong>devtools</strong> package via the function <code>github_pat()</code>. To take another example, the following line in <code>.Renviron</code> sets the <code>ZEIT_KEY</code> environment variable which is used in the <strong><a href="https://cran.r-project.org/web/packages/diezeit/">diezeit</a></strong> package:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ot">ZEIT_KEY=</span>PUT_YOUR_KEY_HERE</code></pre></div>
<p>You will need to sign-in and start a new R session for the environment variable (accessed by <code>Sys.getenv</code>) to be visible. To test if the example API key has been successfully added as an environment variable, run the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.getenv</span>(<span class="st">&quot;ZEIT_KEY&quot;</span>)</code></pre></div>
<p>Use of the <code>.Renviron</code> file for storing settings such as library paths and API keys is efficient because it reduces the need to update your settings for every R session. Furthermore, the same <code>.Renviron</code> file will work across different platforms so keep it stored safely.</p>
<div id="example-.renviron-file" class="section level4">
<h4><span class="header-section-number">2.4.6.1</span> Example <code>.Renviron</code> file</h4>
<p>My <code>.Renviron</code> file has grown over the years. I often switch between my desktop and laptop computers, so to maintain a consistent working environment, I have the same <code>.Renviron</code> file on all of my machines. As well as containing an <code>R_LIBS</code> entry and some API keys, my <code>.Renviron</code> has a few other lines:</p>
<ul>
<li><p><code>TMPDIR=/data/R_tmp/</code>. When R is running, it creates temporary copies. On my work machine, the default directory is a network drive.</p></li>
<li><p><code>R_COMPILE_PKGS=3</code>. Byte compile all packages (covered in Chapter <a href="programming.html#programming">3</a>).</p></li>
<li><p><code>R_LIBS_SITE=/usr/lib/R/site-library:/usr/lib/R/library</code> I explicitly state where to look for packages. My University has a site-wide directory that contains out of date packages. I want to avoiding using this directory.</p></li>
<li><p><code>R_DEFAULT_PACKAGES=utils,grDevices,graphics,stats,methods</code>. Explicitly state the packages to load. Note I don’t load the <code>datasets</code> package, but I ensure that <code>methods</code> is always loaded. Due to historical reasons, the <code>methods</code> package isn’t loaded by default in certain applications, e.g. <code>Rscript</code>.</p></li>
</ul>
</div>
<div id="exercises-3" class="section level4 unnumbered">
<h4>Exercises</h4>
<ol style="list-style-type: decimal">
<li><p>What are the three locations where the startup files are stored? Where are these locations on your computer?</p></li>
<li>For each location, does a <code>.Rprofile</code> or <code>.Renviron</code> file exist?</li>
<li>Create a <code>.Rprofile</code> file in your current working directory that prints the message <code>Happy efficient R programming</code> each time you start R at this location.</li>
<li><p>What happens to the startup files in <code>R_HOME</code> if you create them in <code>HOME</code> or local project directories?</p></li>
</ol>
</div>
</div>
</div>
<div id="rstudio" class="section level2">
<h2><span class="header-section-number">2.5</span> RStudio</h2>
<p>RStudio is an Integrated Development Environment (IDE) for R. It makes life easy for R users and developers with its intuitive and flexible interface. RStudio encourages good programming practice. Through its wide range of features RStudio can help make you a more efficient and productive R programmer. RStudio can, for example, greatly reduce the amount of time spent remembering and typing function names thanks to intelligent autocompletion. Some of the most important features of RStudio include:</p>
<ul>
<li>Flexible window pane layouts to optimise use of screen space and enable fast interactive visual feed-back.</li>
<li>Intelligent autocompletion of function names, packages and R objects.</li>
<li>A wide range of keyboard shortcuts.</li>
<li>Visual display of objects, including a searchable data display table.</li>
<li>Real-time code checking and error detection.</li>
<li>Menus to install and update packages.</li>
<li>Project management and integration with version control.</li>
</ul>
<p>The above list of features should make it clear that a well set-up IDE can be as important as a well set-up R installation for becoming an efficient R programmer.<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> As with R itself, the best way to learn about RStudio is by using it. It is therefore worth reading through this section in parallel with using RStudio to boost your productivity.</p>
<div id="install-rstudio" class="section level3">
<h3><span class="header-section-number">2.5.1</span> Installing and updating RStudio</h3>
<p>RStudio can be installed from the RStudio website <a href="https://www.rstudio.com/products/rstudio/download/">rstudio.com</a> and is available for all major operating systems. Updating RStudio is simple: click on <code>Help &gt; Check for Updates</code> in the menu. For fast and efficient work keyboard shortcuts should be used wherever possible, reducing the reliance on the mouse. RStudio has many keyboard shortcuts that will help with this. To get into good habits early, try accessing the RStudio Update interface without touching the mouse. On Linux and Windows dropdown menus are activated with the <code>Alt</code> button, so the menu item can be found with:</p>
<pre><code>Alt+H U</code></pre>
<p>On Mac it works differently. <code>Cmd+?</code> should activate a search across menu items, allowing the same operation can be achieved with:</p>
<pre><code>Cmd+? update</code></pre>
<p><strong>Note:</strong> in RStudio the keyboard shortcuts differ between Linux and Windows versions on one hand and Mac on the other. In this section we generally only use the Windows/Linux shortcut keys for brevity. The Mac equivalent is usually found by simply replacing <code>Ctrl</code> and <code>Alt</code> with the Mac-specific <code>Cmd</code> button.</p>
</div>
<div id="window-pane-layout" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Window pane layout</h3>
<p>RStudio has four main window ‘panes’ (see Figure <a href="set-up.html#fig:2-2">2.2</a>), each of which serves a range of purposes:</p>
<ul>
<li><p>The <strong>Source pane</strong>, for editing, saving, and dispatching R code to the console (top left). Note that this pane does not exist by default when you start RStudio: it appears when you open an R script, e.g. via File -&gt; New File -&gt; R Script. A common task in this pane is to send code on the current line to the console, via <code>Ctrl-Enter</code> (or <code>Cmd-Enter</code> on Mac).</p></li>
<li><p>The <strong>Console pane</strong>. Any code entered here is processed by R, line by line. This pane is ideal for interactively testing ideas before saving the final results in the Source pane above.</p></li>
<li><p>The <strong>Environment pane</strong> (top right) contains information about the current objects loaded in the workspace including their class, dimension (if they are a data frame) and name. This pane also contains tabbed sub-panes with a searchable history that was dispatched to the console and (if applicable to the project) Build and Git options.</p></li>
<li><p>The <strong>Files pane</strong> (bottom right) contains a simple file browser, a Plots tab, Help and Package tabs and a Viewer for visualising interactive R output such as those produced by the leaflet package and HTML ‘widgets’.</p></li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:2-2"></span>
<img src="figures/f2_2_rstudio.png" alt="RStudio Panels" width="100%" />
<p class="caption">
Figure 2.2: RStudio Panels
</p>
</div>
<p>Using each of the panels effectively and navigating between them quickly is a skill that will develop over time, and will only improve with practice.</p>
<div id="exercises-4" class="section level4 unnumbered">
<h4>Exercises</h4>
<p>You are developing a project to visualise data. Test out the multi-panel RStudio workflow by following the steps below:</p>
<ol style="list-style-type: decimal">
<li><p>Create a new folder for the input data using the <strong>Files pane</strong>.</p></li>
<li>Type in <code>downl</code> in the <strong>Source pane</strong> and hit <code>Enter</code> to make the function <code>download.file()</code> autocomplete. Then type <code>&quot;</code>, which will autocomplete to <code>&quot;&quot;</code>, paste the URL of a file to download (e.g. <code>https://www.census.gov/2010census/csv/pop_change.csv</code>) and a file name (e.g. <code>pop_change.csv</code>).</li>
<li><p>Execute the full command with <code>Ctrl-Enter</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">download.file</span>(<span class="st">&quot;https://www.census.gov/2010census/csv/pop_change.csv&quot;</span>,
              <span class="st">&quot;extdata/pop_change.csv&quot;</span>)</code></pre></div></li>
<li><p>Write and execute a command to read-in the data, such as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pop_change =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;extdata/pop_change.csv&quot;</span>, <span class="dt">skip =</span> <span class="dv">2</span>)</code></pre></div></li>
<li><p>Use the <strong>Environment pane</strong> to click on the data object <code>pop_change</code>. Note that this runs the command <code>View(pop_change)</code>, which launches an interactive data explore pane in the top left panel (see Figure <a href="set-up.html#fig:2-3">2.3</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:2-3"></span>
<img src="figures/f2_3_view.png" alt="The data viewing tab in RStudio." width="100%" />
<p class="caption">
Figure 2.3: The data viewing tab in RStudio.
</p>
</div></li>
<li><p>Use the <strong>Console</strong> to test different plot commands to visualise the data, saving the code you want to keep back into the <strong>Source pane</strong>, as <code>pop_change.R</code>.</p></li>
<li><p>Use the <strong>Plots tab</strong> in the Files pane to scroll through past plots. Save the best using the Export dropdown button.</p></li>
</ol>
<p>The above example shows understanding of these panes and how to use them interactively can help with the speed and productivity of you R programming. Further, there are a number of RStudio settings that can help ensure that it works for your needs.</p>
</div>
</div>
<div id="rstudio-options" class="section level3">
<h3><span class="header-section-number">2.5.3</span> RStudio options</h3>
<p>A range of <code>Project Options</code> and <code>Global Options</code> are available in RStudio from the <code>Tools</code> menu (accessible in Linux and Windows from the keyboard via <code>Alt+T</code>). Most of these are self-explanatory but it is worth mentioning a few that can boost your programming efficiency:</p>
<ul>
<li><p>GIT/SVN project settings allow RStudio to provide a graphical interface to your version control system, described in Chapter <a href="collaboration.html#collaboration">9</a>.</p></li>
<li><p>R version settings allow RStudio to ‘point’ to different R versions/interpreters, which may be faster for some projects.</p></li>
<li><p><code>Restore .RData</code>: Unticking this default preventing loading previously creating R objects. This will make starting R quicker and also reduce the change of getting bugs due to previously created objects.</p></li>
<li><p>Code editing options can make RStudio adapt to your coding style, for example, by preventing the autocompletion of braces, which some experienced programmers may find annoying. Enabling <code>Vim mode</code> makes RStudio act as a (partial) Vim emulator.</p></li>
<li><p>Diagnostic settings can make RStudio more efficient by adding additional diagnostics or by removing diagnostics if they are slowing down your work. This may be an issue for people using RStudio to analyse large datasets on older low-spec computers.</p></li>
<li><p>Appearance: if you are struggling to see the source code, changing the default font size may make you a more efficient programmer by reducing the time overheads associated with squinting at the screen. Other options in this area relate more to aesthetics, which are also important because feeling comfortable in your programming environment can boost productivity.</p></li>
</ul>
</div>
<div id="autocompletion" class="section level3">
<h3><span class="header-section-number">2.5.4</span> Autocompletion</h3>
<p>R provides some basic autocompletion functionality. Typing the beginning of a function name, for example <code>rn</code> (short for <code>rnorm()</code>), and hitting <code>Tab</code> twice will result in the full function names associated with this text string being printed. In this case two options would be displayed: <code>rnbinom</code> and <code>rnorm</code>, providing a useful reminder to the user about what is available. The same applies to file names enclosed in quote marks: typing <code>te</code> in the console in a project which contains a file called <code>test.R</code> should result in the full name <code>&quot;test.R&quot;</code> being autocompleted. RStudio builds on this functionality and takes it to a new level.</p>
<div class="rmdtip">
<p>
The default settings for autocompletion in RStudio work well. They are intuitive and are likely to work well for many users, especially beginners. However, RStudio’s autocompletion options can be modfified, but navigating to <strong>Tools &gt; Global Options &gt; Code &gt; Completion</strong> in RStudio’s top level menu.
</p>
</div>
<p>Instead of only auto completing options when <code>Tab</code> is pressed, RStudio auto completes them at any point. Building on the previous example, RStudio’s autocompletion triggers when the first three characters are typed: <code>rno</code>. The same functionality works when only the first characters are typed, followed by <code>Tab</code>: automatic autocompletion does not replace <code>Tab</code> autocompletion but supplements it. Note that in RStudio two more options are provided to the user after entering <code>rn Tab</code> compared with entering the same text into base R’s console described in the previous paragraph: <code>RNGkind</code> and <code>RNGversion</code>. This illustrates that RStudio’s autocompletion functionality is not case sensitive in the same way that R is. This is a good thing because R has no consistent function name style!</p>
<p>RStudio also has more intelligent autocompletion of objects and file names than R’s built-in command line. To test this functionality, try typing <code>US</code>, followed by the Tab key. After pressing down until <code>USArrests</code> is selected, press Enter so it autocompletes. Finally, typing <code>$</code> should leave the following text on the screen and the four columns should be shown in a drop-down box, ready for you to select the variable of interest with the down arrow.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">USArrests$<span class="st"> </span><span class="co"># a dropdown menu of columns should appear in RStudio</span></code></pre></div>
<p>To take a more complex example, variable names stored in the <code>data</code> slot of the class <code>SpatialPolygonsDataFrame</code> (a class defined by the foundational spatial package sp) are referred to in the long form <code>spdf@data$varname</code>.<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a> In this case <code>spdf</code> is the object name, <code>data</code> is the slot and <code>varname</code> is the variable name. RStudio makes such <code>S4</code> objects easier to use by enabling autocompletion of the short form <code>spdf$varname</code>. Another example is RStudio’s ability to find files hidden away in sub-folders. Typing <code>&quot;te</code> will find <code>test.R</code> even if it is located in a sub-folder such as <code>R/test.R</code>. There are a number of other clever autocompletion tricks that can boost R’s productivity when using RStudio which are best found by experimenting and hitting <code>Tab</code> frequently during your R programming work.</p>
</div>
<div id="keyboard-shortcuts" class="section level3">
<h3><span class="header-section-number">2.5.5</span> Keyboard shortcuts</h3>
<p>RStudio has many useful shortcuts that can help make your programming more efficient by reducing the need to reach for the mouse and point and click your way around code and RStudio. These can be viewed by using a little known but extremely useful keyboard shortcut (this can also be accessed via the <strong>Tools</strong> menu).</p>
<pre><code>Alt+Shift+K</code></pre>
<p>This will display the default shortcuts in RStudio. It is worth spending time identifying which of these could be useful in your work and practising interacting with RStudio rapidly with minimal reliance on the mouse. The power of these autocompletion capabilities can be further enhanced by setting your own keyboard shortcuts. However, as with setting <code>.Rprofile</code> and <code>.Renviron</code> settings, this risks reducing the portability of your workflow. To set your own RStudio keyboard shortcuts, navigate to <strong>Tools &gt; Modify Keyboard Shortcuts</strong>.</p>
<p>Some more <a href="http://stronginstruments.com/2014/11/26/rstudio-shortcuts-windows-for-cleaner-and-faster-coding/">useful</a> shortcuts are listed below. There are many more gems to find that could boost your R writing productivity:</p>
<ul>
<li><code>Ctrl+Z/Shift+Z</code>: Undo/Redo.</li>
<li><code>Ctrl+Enter</code>: Execute the current line or code selection in the Source pane.</li>
<li><code>Ctrl+Alt+R</code>: Execute all the R code in the currently open file in the Source pane.</li>
<li><code>Ctrl+Left/Right</code>: Navigate code quickly, word by word.</li>
<li><code>Home/End</code>: Navigate to the beginning/end of the current line.</li>
<li><code>Alt+Shift+Up/Down</code>: Duplicate the current line up or down.</li>
<li><code>Ctrl+D</code>: Delete the current line.</li>
</ul>
</div>
<div id="object-display-and-output-table" class="section level3">
<h3><span class="header-section-number">2.5.6</span> Object display and output table</h3>
<p>It is useful to know what is in your current R environment. This information can be revealed with <code>ls()</code>, but this function only provides object names. RStudio provides an efficient mechanism to show currently loaded objects, and their details, in real-time: the Environment tab in the top right corner. It makes sense to keep an eye on which objects are loaded and to delete objects that are no longer useful. Doing so will minimise the probability of confusion in your workflow (e.g. by using the wrong version of an object) and reduce the amount of RAM R needs. The details provided in the Environment tab include the object’s dimension and some additional details depending on the object’s class (e.g. size in MB for large datasets).</p>
<p>A very useful feature of RStudio is its advanced viewing functionality. This is triggered either by executing <code>View(object)</code> or by double clicking on the object name in the Environment tab. Although you cannot edit data in the Viewer (this should be considered a good thing from a data integrity perspective), recent versions of RStudio provide an efficient search mechanism to rapidly filter and view the records that are of most interest (see Figure <a href="set-up.html#fig:2-3">2.3</a>).</p>
</div>
<div id="project-management" class="section level3">
<h3><span class="header-section-number">2.5.7</span> Project management</h3>
<p>In the far top-right of RStudio there is a diminutive drop-down menu illustrated with R inside a transparent box. This menu may be small and simple, but it is hugely efficient in terms of organising large, complex and long-term projects.</p>
<p>The idea of RStudio projects is that the bulk of R programming work is part of a wider task, which will likely consist of input data, R code, graphical and numerical outputs and documents describing the work. It is possible to scatter each of these elements at random across your hard-discs but this is not recommended. Instead, the concept of projects encourages reproducible working, such that anyone who opens the particular project folder that you are working from should be able to repeat your analyses and replicate your results.</p>
<p>It is therefore <em>highly recommended</em> that you use projects to organise your work. It could save hours in the long-run. Organizing data, code and outputs also makes sense from a portability perspective: if you copy the folder (e.g. via GitHub) your can work on it from any computer without worrying about having the right files on your current machine. These tasks are implemented using RStudio’s simple project system, in which the following things happen each time you open an existing project:</p>
<ul>
<li><p>The working directory automatically switches to the project’s folder. This enables data and script files to be referred to using relative file paths, which are much shorter than absolute file paths. This means that switching directory using <code>setwd()</code>, a common source of error for R users, is rarely if ever needed.</p></li>
<li><p>The last previously open file is loaded into the Source pane. The history of R commands executed in previous sessions is also loaded into the History tab. This assists with continuity between one session and the next.</p></li>
<li><p>The <code>File</code> tab displays the associated files and folders in the project, allowing you to quickly find your previous work.</p></li>
<li><p>Any settings associated with the project, such as Git settings, are loaded. This assists with collaboration and project-specific set-up.</p></li>
</ul>
<p>Each project is different but most contain input data, R code and outputs. To keep things tidy, we recommend a sub-directory structure resembling the following:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">project/</span>
  <span class="kw">-</span> README.Rmd <span class="co"># Project description</span>
  <span class="kw">-</span> set-up.R  <span class="co"># Required packages</span>
  <span class="kw">-</span> R/ <span class="co"># For R code</span>
  <span class="kw">-</span> input <span class="co"># Data files</span>
  <span class="kw">-</span> graphics/
  <span class="kw">-</span> output/ <span class="co"># Results</span></code></pre></div>
<p>Proper use of projects ensures that all R source files are neatly stashed in one folder with a meaningful structure. This way data and documentation can be found where one would expect them. Under this system figures and project outputs are ‘first class citizens’ within the project’s design, each with their own folder.</p>
<p>Another approach to project management is to treat projects as R packages. This is not recommended for most use cases, as it places restrictions on where you can put files. However, if the aim is <em>code development and sharing</em>, creating a small R package may be the way forward, even if you never intend to submit it on CRAN. Creating R packages is easier than ever before, as documented in <span class="citation">(Cotton <a href="#ref-cotton_learning_2013">2013</a>)</span> and, more recently <span class="citation">(H. Wickham <a href="#ref-Wickham_2015">2015</a><a href="#ref-Wickham_2015">c</a>)</span>. The <strong>devtools</strong> package help manage R’s quirks, making the process much less painful. If you use GitHub, the advantage of this approach is that anyone should be able to reproduce your working using <code>devtools::install_github(&quot;username/projectname&quot;)</code>, although the administrative overheads of creating an entire package for each small project will outweigh the benefits for many.</p>
<p>Note that a <code>set-up.R</code> or even a <code>.Rprofile</code> file in the project’s root directory enable project-specific settings to be loaded each time people work on the project. As described in the previous section, <code>.Rprofile</code> can be used to tweak how R works at start-up. It is also a portable way to manage R’s configuration on a project-by-project basis.</p>
</div>
<div id="exercises-5" class="section level3 unnumbered">
<h3>Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Try modifying the look and appearance of your RStudio setup.</p></li>
<li><p>What is the keyboard shortcut to show the other shortcut? (Hint: it begins with <code>Alt+Shift</code> on Linux and Windows.)</p></li>
<li><p>Try as many of the shortcuts revealed by the previous step as you like. Write down the ones that you think will save you time, perhaps on a post-it note to go on your computer.</p></li>
</ol>
</div>
</div>
<div id="blas-and-alternative-r-interpreters" class="section level2">
<h2><span class="header-section-number">2.6</span> BLAS and alternative R interpreters</h2>
<p>In this section we cover a few system-level options available to speed-up R’s performance. Note that for many applications stability rather than speed is a priority, so these should only be considered if a) you have exhausted options for writing your R code more efficiently and b) you are confident tweaking system-level settings. This should therefore be seen as an advanced section: if you are not interested in speeding-up base R, feel free to skip to the next section of hardware.</p>
<p>Many statistical algorithms manipulate matrices. R uses the Basic Linear Algebra System (BLAS) framework for linear algebra operations. Whenever we carry out a matrix operation, such as transpose or finding the inverse, we use the underlying BLAS library. By switching to a different BLAS library, it may be possible to speed-up your R code. Changing your BLAS library is straightforward if you are using Linux, but can be tricky for Windows users.</p>
<p>The two open source alternative BLAS libraries are <a href="http://math-atlas.sourceforge.net/">ATLAS</a> and <a href="https://github.com/xianyi/OpenBLAS">OpenBLAS</a>. The <a href="https://software.intel.com/en-us/intel-mkl">Intel MKL</a> is another implementation, designed for Intel processors by Intel and used in Revolution R (described in the next section) but it requires licensing fees. The MKL library is provided with the Revolution analytics system. Depending on your application, by switching you BLAS library, linear algebra operations can run several times faster than with the base BLAS routines.</p>
<p>If you use Linux, you can find whether you have a BLAS library setting with the following function, from <strong>benchmarkme</strong>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;benchmarkme&quot;</span>)
<span class="kw">get_linear_algebra</span>()</code></pre></div>
<div id="testing-performance-gains-from-blas" class="section level3">
<h3><span class="header-section-number">2.6.1</span> Testing performance gains from BLAS</h3>
<p>As an illustrative test of the performance gains offered by BLAS, the following test was run on a new laptop running Ubuntu 15.10 on a 6<sup>th</sup> generation Core i7 processor, before and after OpenBLAS was installed.<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res =<span class="st"> </span><span class="kw">benchmark_std</span>() <span class="co"># run a suit of tests to test R&#39;s performance</span></code></pre></div>
<p>It was found that the installation of OpenBLAS led to a 2-fold speed-up (from around 150 to 70 seconds). The majority of the speed gain was from the matrix algebra tests, as can be seen in figure <a href="set-up.html#fig:blas-bench">2.4</a>. Note that the results of such tests are highly dependent on the particularities of each computer. However, it clearly shows that ‘programming’ benchmarks (e.g. the calculation of 3,500,000 Fibonacci numbers) are now much faster, whereas matrix calculations and functions receive a substantial speed boost. This demonstrates that the speed-up you can expect from BLAS depends heavily on the type of computations you are undertaking.</p>
<div class="figure" style="text-align: center"><span id="fig:blas-bench"></span>
<img src="_main_files/figure-html/blas-bench-1.png" alt="Performance gains obtained changing the underlying BLAS library (tests from `benchmark\_std()`)." width="70%" />
<p class="caption">
Figure 2.4: Performance gains obtained changing the underlying BLAS library (tests from <code>benchmark\_std()</code>).
</p>
</div>
</div>
<div id="other-interpreters" class="section level3">
<h3><span class="header-section-number">2.6.2</span> Other interpreters</h3>
<p>The R <em>language</em> can be separated from the R <em>interpreter</em>. The former refers to the meaning of R commands, the latter refers to how the computer executes the commands. Alternative interpreters have been developed to try to make R faster and, while promising, none of the following options has fully taken off.</p>
<ul>
<li><a href="http://www.revolutionanalytics.com/microsoft-r-open">Microsoft R Open</a>, formerly known as Revolution R Open (RRO), is the enhanced distribution of R from Microsoft. The key enhancement is that it uses multithreaded mathematics libraries, which can improve performance.</li>
<li><p><a href="https://github.com/rho-devel/rho">Rho</a> (previously called CXXR, short for C++), a re-implementation of the R interpreter for speed and efficiency. Of the new interpreters, this is the one that has the most recent development activity (as of April 2016).</p></li>
<li><p><a href="http://www.pqr-project.org/">pqrR</a> (pretty quick R) is a new version of the R interpreter. One major downside, is that it is based on R-2.15.0. The developer (Radford Neal) has made many improvements, some of which have now been incorporated into base R. <strong>pqR</strong> is an open-source project licensed under the GPL. One notable improvement in pqR is that it is able to do some numeric computations in parallel with each other, and with other operations of the interpreter, on systems with multiple processors or processor cores.</p></li>
<li><p><a href="http://www.renjin.org/">Renjin</a> reimplements the R interpreter in Java, so it can run on the Java Virtual Machine (JVM). Since R will be pure Java, it can run anywhere.</p></li>
<li><p><a href="http://spotfire.tibco.com/">Tibco</a> created a C++ based interpreter called TERR.</p></li>
<li><p>Oracle also offer an R-interpreter that uses Intel’s mathematics library and therefore achieves a higher performance without changing R’s core.</p></li>
</ul>
<p>At the time of writing, switching interpreters is something to consider carefully. But in the future, it may become more routine.</p>
</div>
<div id="useful-blasbenchmarking-resources" class="section level3">
<h3><span class="header-section-number">2.6.3</span> Useful BLAS/benchmarking resources</h3>
<ul>
<li>The <a href="https://cran.r-project.org/web/packages/gcbd/">gcbd</a> package benchmarks performance of a few standard linear algebra operations across a number of different BLAS libraries as well as a GPU implementation. It has an excellent vignette summarising the results.</li>
<li><a href="http://brettklamer.com/diversions/statistical/faster-blas-in-r/">Brett Klamer</a> provides a nice comparison of ATLAS, OpenBLAS and Intel MKL BLAS libraries. He also gives a description of how to install the different libraries.</li>
<li>The official R manual <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html#BLAS">section</a> on BLAS.</li>
</ul>
</div>
<div id="exercises-6" class="section level3 unnumbered">
<h3>Exercises</h3>
<ol style="list-style-type: decimal">
<li>What BLAS system is your version of R using?</li>
</ol>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-cotton_learning_2013">
<p>Cotton, Richard. 2013. <em>Learning R</em>. O’Reilly Media.</p>
</div>
<div id="ref-Wickham_2015">
<p>Wickham, Hadley. 2015c. <em>R Packages</em>. O’Reilly Media.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Benchmarking conducted for a presentation “R on Different Platforms” at useR 2006 found that R was marginally faster on Windows than Linux set-ups. Similar results were reported in an academic paper, with R completing statistical analyses faster on a Linux than Mac OS’s <span class="citation">(Sekhon <a href="#ref-sekhon2006art">2006</a>)</span>. In 2015 <a href="http://blog.revolutionanalytics.com/2015/04/benchmarks-of-rro-on-osx-and-ubuntu.html">Revolution R</a> supported these results with slightly faster run times for certain benchmarks on Ubuntu than Mac systems. The data from the <code>benchmarkme</code> package also suggests that running code under the Linux OS is faster.<a href="set-up.html#fnref1">↩</a></p></li>
<li id="fn2"><p>See <a href="https://cran.r-project.org/web/packages/httr/vignettes/api-packages.html"><code>vignette(&quot;api-packages&quot;)</code></a> from the <code>httr</code> package for more on this.<a href="set-up.html#fnref2">↩</a></p></li>
<li id="fn3"><p>Other open source R IDEs exist, including <a href="https://rkward.kde.org/">RKWard</a>, <a href="http://sourceforge.net/projects/tinn-r/">Tinn-R</a> and <a href="https://www.rforge.net/JGR/">JGR</a>. <a href="https://www.gnu.org/software/emacs/">emacs</a> is another popular software environment. However, it has a very steep learning curve.<a href="set-up.html#fnref3">↩</a></p></li>
<li id="fn4"><p>‘Slots’ are elements of an object (specifically, S4 objects) analogous to a column in a <code>data.frame</code> but referred to with <code>@</code> not <code>$</code>.<a href="set-up.html#fnref4">↩</a></p></li>
<li id="fn5"><p>OpenBLAS was installed on the computer via <code>sudo apt-get install libopenblas-base</code>, which automatically detected and used by R.<a href="set-up.html#fnref5">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="programming.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/csgillespie/efficientR/edit/master/02-set-up.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
